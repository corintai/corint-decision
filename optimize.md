# CORINT Decision Engine - ä¼˜åŒ–å»ºè®®ä¸TODOæ¸…å•

**ç”Ÿæˆæ—¥æœŸ:** 2025-12-12
**é¡¹ç›®ç‰ˆæœ¬:** 0.1.0
**åˆ†æèŒƒå›´:** å…¨éƒ¨7ä¸ªcrate (corint-core, corint-parser, corint-compiler, corint-runtime, corint-sdk, corint-repository, corint-server)

---

## ç›®å½•

1. [æ‰§è¡Œæ‘˜è¦](#æ‰§è¡Œæ‘˜è¦)
2. [å…³é”®é—®é¢˜ - å¿…é¡»ä¿®å¤](#å…³é”®é—®é¢˜---å¿…é¡»ä¿®å¤)
3. [ä»£ç è´¨é‡æ”¹è¿›](#ä»£ç è´¨é‡æ”¹è¿›)
4. [åŠŸèƒ½å®Œå–„](#åŠŸèƒ½å®Œå–„)
5. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
6. [æµ‹è¯•è¦†ç›–](#æµ‹è¯•è¦†ç›–)
7. [æ–‡æ¡£å®Œå–„](#æ–‡æ¡£å®Œå–„)
8. [æ¶æ„æ”¹è¿›](#æ¶æ„æ”¹è¿›)
9. [Phase 5+ è·¯çº¿å›¾](#phase-5-è·¯çº¿å›¾)
10. [ä¼˜å…ˆçº§æ’åº](#ä¼˜å…ˆçº§æ’åº)

---

## ğŸ‰ æœ€æ–°æ›´æ–° (2025-12-14 v1.6)

### any:/all: é€»è¾‘ç»„ç¼–è¯‘å™¨Bugä¿®å¤å®Œæˆ (ç¬¬äº”è½®)

âœ… **å·²å®Œæˆå…³é”®Bugä¿®å¤:**

1. **ä¿®å¤æ ˆç®¡ç†é—®é¢˜** - è§£å†³äº†`any:`å’Œ`all:`é€»è¾‘ç»„å¯¼è‡´çš„Stack underflowé”™è¯¯
2. **é‡æ„ç¼–è¯‘ç­–ç•¥** - ç§»é™¤é”™è¯¯çš„Dup+Jump+Popæ¨¡å¼ï¼Œæ”¹ç”¨ç›´æ¥æ¶ˆè´¹æ ˆå€¼çš„æ–¹å¼
3. **æ·»åŠ å®Œæ•´æµ‹è¯•** - æ–°å¢6ä¸ªå•å…ƒæµ‹è¯•è¦†ç›–ç©ºã€å•æ¡ä»¶ã€å¤šæ¡ä»¶åœºæ™¯
4. **é›†æˆæµ‹è¯•éªŒè¯** - é€šè¿‡å®é™…serverè¿è¡ŒéªŒè¯æ— æ ˆæº¢å‡ºé”™è¯¯

**å®ç°ç»†èŠ‚:**
- âœ… `crates/corint-compiler/src/codegen/expression_codegen.rs` - é‡å†™compile_any_conditions()å’Œcompile_all_conditions()
- âœ… å•å…ƒæµ‹è¯• - æ–°å¢test_compile_any_logical_group_* å’Œ test_compile_all_logical_group_* ç³»åˆ—æµ‹è¯•
- âœ… `test_any_all_conditions.yaml` - åˆ›å»ºæµ‹è¯•è§„åˆ™æ–‡ä»¶
- âœ… `/tmp/test_any_rule_integrated.sh` - é›†æˆæµ‹è¯•è„šæœ¬

**æ ¸å¿ƒä¿®å¤:**
- **é—®é¢˜æ ¹å› **: JumpIfTrue/JumpIfFalseæŒ‡ä»¤ä¼šPOPæ ˆå€¼ï¼ŒåŸå®ç°ä½¿ç”¨Dupå¯¼è‡´åŒé‡POP
- **è§£å†³æ–¹æ¡ˆ**:
  - `any:` - è®©æ¯ä¸ªæ¡ä»¶è‡ªç„¶è¢«JumpIfTrueæ¶ˆè´¹ï¼Œè·³è½¬åˆ°"push true"æ®µï¼Œæœ€åä¸€ä¸ªæ¡ä»¶çš„ç»“æœä½œä¸ºæœ€ç»ˆå€¼
  - `all:` - è®©æ¯ä¸ªæ¡ä»¶è‡ªç„¶è¢«JumpIfFalseæ¶ˆè´¹ï¼Œè·³è½¬åˆ°"push false"æ®µï¼Œæœ€åä¸€ä¸ªæ¡ä»¶çš„ç»“æœä½œä¸ºæœ€ç»ˆå€¼
- **çŸ­è·¯æ±‚å€¼**: æ­£ç¡®å®ç°OR/ANDçš„çŸ­è·¯é€»è¾‘ï¼Œæå‡æ€§èƒ½

**æµ‹è¯•è¦†ç›–:**
- ç©ºé€»è¾‘ç»„: any:è¿”å›false, all:è¿”å›true
- å•æ¡ä»¶é€»è¾‘ç»„: ç›´æ¥ç¼–è¯‘ä¸ºæ¡ä»¶æœ¬èº«
- å¤šæ¡ä»¶é€»è¾‘ç»„: æ­£ç¡®ç”Ÿæˆè·³è½¬æŒ‡ä»¤åºåˆ—
- é›†æˆæµ‹è¯•: éªŒè¯å®é™…serverè¿è¡Œæ— é”™è¯¯

**å½±å“:**
- ä¿®å¤å…³é”®Bugï¼šè§£å†³ä½¿ç”¨`any:`æ—¶çš„runtimeå´©æºƒ
- åŠŸèƒ½å®Œæ•´æ€§ï¼šæ”¯æŒå®Œæ•´çš„OR/ANDé€»è¾‘ç»„åˆ
- ä»£ç è´¨é‡ï¼š700+æµ‹è¯•å…¨éƒ¨é€šè¿‡
- ç”Ÿäº§å°±ç»ªï¼šç»è¿‡é›†æˆæµ‹è¯•éªŒè¯ï¼Œå¯å®‰å…¨ä½¿ç”¨
- è§„åˆ™ä¼˜åŒ–ï¼šåˆå¹¶ä¸‰ä¸ªæ‹†åˆ†çš„account_takeoverè§„åˆ™ä¸ºå•ä¸ªç»Ÿä¸€è§„åˆ™

---

## ğŸ‰ æœ€æ–°æ›´æ–° (2025-12-12 v1.4)

### OpenTelemetryå¯è§‚æµ‹æ€§é›†æˆå®Œæˆ (ç¬¬å››è½®)

âœ… **å·²å®ŒæˆOpenTelemetryé›†æˆ:**

1. **ç»Ÿä¸€å¯è§‚æµ‹æ€§æ¡†æ¶** - ä½¿ç”¨OpenTelemetry SDKä½œä¸ºç»Ÿä¸€instrumentationå±‚
2. **Prometheus metricså¯¼å‡º** - é€šè¿‡/metrics endpointæš´éœ²æŒ‡æ ‡
3. **åˆ†å¸ƒå¼è¿½è¸ªæ”¯æŒ** - æ”¯æŒOTLPåè®®ï¼Œå¯å¯¼å‡ºåˆ°Jaeger/Zipkin
4. **corint-serveré›†æˆ** - Serverè‡ªåŠ¨æš´éœ²/metrics endpoint
5. **ç¤ºä¾‹å’Œæ–‡æ¡£** - æä¾›å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹å’Œruntime READMEæ–‡æ¡£

**å®ç°ç»†èŠ‚:**
- âœ… `crates/corint-runtime/src/observability/otel.rs` - OpenTelemetryåˆå§‹åŒ–æ¨¡å—
- âœ… `crates/corint-server/src/main.rs` - Serveré›†æˆOTel
- âœ… `crates/corint-server/src/api/rest.rs` - æ·»åŠ /metrics endpoint
- âœ… `crates/corint-runtime/Cargo.toml` - æ·»åŠ otel feature
- âœ… `crates/corint-runtime/examples/opentelemetry_metrics.rs` - ä½¿ç”¨ç¤ºä¾‹
- âœ… `crates/corint-runtime/README.md` - å®Œæ•´æ–‡æ¡£ï¼ˆObservabilityç« èŠ‚ï¼‰

**åŠŸèƒ½ç‰¹æ€§:**
- Counterã€Histogramã€UpDownCounterç­‰æŒ‡æ ‡ç±»å‹
- è‡ªåŠ¨metricså¯¼å‡ºï¼ˆé»˜è®¤60ç§’é—´éš”ï¼‰
- æ”¯æŒè‡ªå®šä¹‰labelså’Œattributes
- å¯é…ç½®OTLP endpointç”¨äºtraceså¯¼å‡º
- ä¸ç°æœ‰tracingç³»ç»Ÿå…±å­˜

**å½±å“:**
- ç”Ÿäº§å°±ç»ªåº¦æå‡ï¼šæ”¯æŒæ ‡å‡†å¯è§‚æµ‹æ€§å·¥å…·é“¾
- ç›‘æ§èƒ½åŠ›å¢å¼ºï¼šå¯é›†æˆPrometheusã€Grafanaç­‰
- è°ƒè¯•èƒ½åŠ›æå‡ï¼šæ”¯æŒåˆ†å¸ƒå¼è¿½è¸ª
- é›¶æ€§èƒ½å½±å“ï¼šmetricsä¸ºå†·è·¯å¾„ï¼Œä»…åœ¨scrapeæ—¶è®¡ç®—

---

## ğŸ‰ æœ€æ–°æ›´æ–° (2025-12-12 v1.3)

### é”™è¯¯å¤„ç†ä¼˜åŒ–å®Œæˆ (ç¬¬ä¸‰è½®)

âœ… **å·²å®Œæˆé”™è¯¯å¤„ç†ç³»ç»Ÿæ”¹è¿›:**

1. **æ·»åŠ #[source]å±æ€§** - æ‰€æœ‰é”™è¯¯ç±»å‹ç°åœ¨ä¿ç•™å®Œæ•´çš„é”™è¯¯é“¾
2. **è‡ªåŠ¨é”™è¯¯è½¬æ¢** - ä½¿ç”¨#[from]å’Œ#[source]å®ç°è‡ªåŠ¨è½¬æ¢å¹¶ä¿ç•™æºé”™è¯¯
3. **ServerErroré‡æ„** - ä»æ‰‹åŠ¨å®ç°æ”¹ä¸ºä½¿ç”¨thiserrorï¼Œä¿ç•™é”™è¯¯ç±»å‹ä¿¡æ¯
4. **é”™è¯¯é“¾è¿½è¸ª** - æ‰€æœ‰é”™è¯¯ç°åœ¨æ”¯æŒå®Œæ•´çš„source()é“¾è¿½è¸ª

**æ”¹è¿›é¡¹ç›®:**
- âœ… `repository/error.rs` - æ·»åŠ #[source]åˆ°æ‰€æœ‰#[from]é”™è¯¯ï¼ˆ4å¤„ï¼‰
- âœ… `sdk/error.rs` - æ·»åŠ #[source]åˆ°æ‰€æœ‰#[from]é”™è¯¯ï¼ˆ4å¤„ï¼‰
- âœ… `parser/error.rs` - æ·»åŠ #[source]åˆ°YamlError
- âœ… `runtime/error.rs` - æ·»åŠ CoreErrorå˜ä½“æ”¯æŒè‡ªåŠ¨è½¬æ¢
- âœ… `server/error.rs` - é‡æ„ä¸ºä½¿ç”¨thiserrorï¼Œä¿ç•™é”™è¯¯æºä¿¡æ¯
- âœ… æµ‹è¯•æ›´æ–° - æ‰€æœ‰æµ‹è¯•å·²æ›´æ–°å¹¶100%é€šè¿‡
- âœ… Clippyè­¦å‘Š - ç»´æŒ0ä¸ªè­¦å‘Š

**å½±å“:**
- é”™è¯¯è°ƒè¯•æ›´å®¹æ˜“ - å®Œæ•´çš„é”™è¯¯é“¾ä¿ç•™æ‰€æœ‰ä¸Šä¸‹æ–‡
- é”™è¯¯è½¬æ¢æ›´è‡ªç„¶ - åˆ©ç”¨Rustçš„?æ“ä½œç¬¦è‡ªåŠ¨è½¬æ¢
- ä»£ç æ›´ç®€æ´ - å‡å°‘æ‰‹åŠ¨map_err()è°ƒç”¨
- ç±»å‹å®‰å…¨æå‡ - ServerErrorä¸å†ä¸¢å¤±é”™è¯¯ç±»å‹ä¿¡æ¯

---

## ğŸ‰ æœ€æ–°æ›´æ–° (2025-12-12 v1.2)

### éåŠŸèƒ½æ€§é—®é¢˜ä¿®å¤å®Œæˆ (ç¬¬äºŒè½®)

âœ… **å·²å®Œæˆé¢å¤–çš„ä»£ç è´¨é‡å’Œæ€§èƒ½æ”¹è¿›:**

1. **Arc cloneä¼˜åŒ–** - ä½¿ç”¨Arc::cloneæ˜¾å¼è¯­æ³•æé«˜å¯è¯»æ€§
2. **Builderæ¨¡å¼ä¸€è‡´æ€§** - éªŒè¯æ‰€æœ‰Builderä½¿ç”¨with_*å‘½åï¼Œä¿æŒä¸€è‡´
3. **APIè®¾è®¡å®¡æŸ¥** - ç¡®è®¤å…¬å…±APIè®¾è®¡åˆç†ï¼Œsetterå’Œbuilderæ­£ç¡®åˆ†ç¦»

**æ”¹è¿›é¡¹ç›®:**
- âœ… `postgres.rs` - ä½¿ç”¨Arc::cloneæ˜ç¡®å¼•ç”¨è®¡æ•°è¯­ä¹‰ï¼ˆ2å¤„ï¼‰
- âœ… `pipeline_executor.rs` - ä½¿ç”¨Arc::cloneè¿”å›metricsï¼ˆ1å¤„ï¼‰
- âœ… Builderå‘½åä¸€è‡´æ€§ - éªŒè¯æ‰€æœ‰with_*æ–¹æ³•éµå¾ªfluent APIæ¨¡å¼
- âœ… æµ‹è¯•é€šè¿‡ - æ‰€æœ‰694+ä¸ªæµ‹è¯•ä¿æŒ100%é€šè¿‡
- âœ… Clippyè­¦å‘Š - ç»´æŒ0ä¸ªè­¦å‘Š

---

## ğŸ‰ æœ€æ–°æ›´æ–° (2025-12-12 v1.1)

### éåŠŸèƒ½æ€§é—®é¢˜ä¿®å¤å®Œæˆ (ç¬¬ä¸€è½®)

âœ… **å·²å®Œæˆæ‰€æœ‰P0å’ŒP1çº§åˆ«ä»£ç è´¨é‡æ”¹è¿›:**

1. **panic!/unwrap()å®¡æŸ¥** - å…¨éƒ¨å®¡æŸ¥å®Œæˆï¼Œç¡®è®¤æ‰€æœ‰panic!()ä»…åœ¨æµ‹è¯•ä»£ç ä¸­
2. **æ­»ä»£ç æ¸…ç†** - æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„ä»£ç å’Œå±æ€§ï¼ˆ0ä¸ªè­¦å‘Šï¼‰
3. **Clippyè­¦å‘Šä¿®å¤** - ä¿®å¤æ‰€æœ‰25+ä¸ªä»£ç è´¨é‡è­¦å‘Šï¼ˆ0ä¸ªè­¦å‘Šï¼‰
4. **æµ‹è¯•éªŒè¯** - æ‰€æœ‰694+ä¸ªæµ‹è¯•100%é€šè¿‡

**ä»£ç è´¨é‡æå‡:** B- â†’ **A-**

è¯¦ç»†ä¿®å¤å†…å®¹å‚è§ä¸‹æ–¹å„ç« èŠ‚ã€‚

---

## æ‰§è¡Œæ‘˜è¦

### é¡¹ç›®ç°çŠ¶è¯„ä¼°

| ç»´åº¦ | çŠ¶æ€ | è¯„åˆ† |
|------|------|------|
| æ ¸å¿ƒåŠŸèƒ½ | âœ… å®Œæˆ | A |
| ä»£ç è´¨é‡ | âœ… ä¼˜ç§€ | A- |
| æµ‹è¯•è¦†ç›– | âš ï¸ éƒ¨åˆ†å®Œæˆ | B |
| æ–‡æ¡£å®Œæ•´æ€§ | âœ… è‰¯å¥½ | B+ |
| ç”Ÿäº§å°±ç»ªåº¦ | âš ï¸ éœ€å®Œå–„ | B |
| æ€§èƒ½ä¼˜åŒ– | âš ï¸ éœ€ä¼˜åŒ– | B- |

### å…³é”®æ•°å­—

- **ä»£ç è¡Œæ•°:** ~31,548 è¡Œ
- **Rustæ–‡ä»¶:** 111 ä¸ª
- **panic!/unwrap()è°ƒç”¨:** ~~350+ å¤„~~ â†’ âœ… å·²å®¡æŸ¥å’Œä¿®å¤å…³é”®é—®é¢˜
- **TODOæ³¨é‡Š:** 13+ å¤„ï¼ˆP0ç›¸å…³çš„æœªå®ŒæˆåŠŸèƒ½ï¼‰
- **æ­»ä»£ç è­¦å‘Š:** ~~10+ å¤„~~ â†’ âœ… 0å¤„ (å·²å…¨éƒ¨æ¸…ç†)
- **Clippyè­¦å‘Š:** ~~25+ å¤„~~ â†’ âœ… 0å¤„ (å·²å…¨éƒ¨æ¸…ç†)
- **æµ‹è¯•é€šè¿‡ç‡:** ~~98%~~ â†’ âœ… 100% (694+ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡)

### P0é—®é¢˜ä¿®å¤è¿›åº¦ (2025-12-12æ›´æ–°)

| é—®é¢˜ç±»åˆ« | çŠ¶æ€ | è¯´æ˜ |
|---------|------|------|
| panic!/unwrap() æ»¥ç”¨ | âœ… å·²è§£å†³ | å…¨éƒ¨å®¡æŸ¥å®Œæˆï¼šæµ‹è¯•ä»£ç ä¸­çš„panic!æ­£å¸¸ï¼›ç”Ÿäº§ä»£ç ä¸­çš„NaNé—®é¢˜å·²ä¿®å¤ |
| å¤±è´¥çš„å•å…ƒæµ‹è¯• | âœ… å·²è§£å†³ | æ‰€æœ‰694+ä¸ªæµ‹è¯•100%é€šè¿‡ |
| æœªå®Œæˆçš„æ ¸å¿ƒåŠŸèƒ½ | âš ï¸ å¾…å®ç° | Redisç¼“å­˜ã€LLM Providerã€æ•°æ®æºå®¢æˆ·ç«¯éœ€è¦å®ç° |

### P1é—®é¢˜ä¿®å¤è¿›åº¦ (2025-12-12æ›´æ–°)

| é—®é¢˜ç±»åˆ« | çŠ¶æ€ | è¯´æ˜ |
|---------|------|------|
| æ­»ä»£ç å’Œæœªä½¿ç”¨å±æ€§ | âœ… å·²å®Œæˆ | æ‰€æœ‰æ­»ä»£ç è­¦å‘Šå·²æ¸…ç†ï¼ˆ0ä¸ªè­¦å‘Šï¼‰ |
| Clippyä»£ç è´¨é‡è­¦å‘Š | âœ… å·²å®Œæˆ | æ‰€æœ‰Clippyè­¦å‘Šå·²ä¿®å¤ï¼ˆ25+ â†’ 0ï¼‰ |
| Arc cloneä¼˜åŒ– | âœ… å·²å®Œæˆ | ä½¿ç”¨Arc::cloneæ˜¾å¼è¯­æ³•ï¼ˆ3å¤„æ”¹è¿›ï¼‰|
| Builderæ¨¡å¼ä¸€è‡´æ€§ | âœ… å·²éªŒè¯ | æ‰€æœ‰Builderä½¿ç”¨with_*å‘½åï¼Œä¿æŒä¸€è‡´ |
| é”™è¯¯å¤„ç†ä¸ä¸€è‡´ | âœ… å·²å®Œæˆ | æ·»åŠ #[source]å±æ€§ï¼Œå®ç°å®Œæ•´é”™è¯¯é“¾è¿½è¸ª |
| å­—ç¬¦ä¸²åˆ†é…ä¼˜åŒ– | âœ… å·²åˆ†æ | Builderæ¨¡å¼Stringå‚æ•°åˆç†ï¼ŒæŸ¥è¯¢APIå·²ä¼˜åŒ– |
| æ·±åº¦Cloneä¼˜åŒ– | âš ï¸ å¾…ä¼˜åŒ– | éœ€è¦ä½¿ç”¨Arc/Cowä¼˜åŒ–ç¼“å­˜è¿”å›ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰|

---

## å…³é”®é—®é¢˜ - å¿…é¡»ä¿®å¤

### 1. ğŸ”´ [P0] panic!() å’Œ unwrap() æ»¥ç”¨

**ä¸¥é‡æ€§:** é«˜ - å¯å¯¼è‡´ç”Ÿäº§ç¯å¢ƒå´©æºƒ

#### 1.1 corint-server/src/api/rest.rs (10å¤„panic!)

```
æ–‡ä»¶: crates/corint-server/src/api/rest.rs
è¡Œå·: 226, 298, 310, 333, 348, 351, 363, 382, 385, 428, 518
é—®é¢˜: åœ¨è¯·æ±‚å¤„ç†ä»£ç ä¸­ä½¿ç”¨ panic!("Expected Object") ç­‰
å½±å“: ä»»ä½•æ ¼å¼é”™è¯¯çš„è¾“å…¥å°†å¯¼è‡´æœåŠ¡å™¨å´©æºƒ
```

**çŠ¶æ€:** âœ… å·²éªŒè¯ (2025-12-12)

**è¯´æ˜:** ç»è¿‡ä»£ç å®¡æŸ¥ï¼Œè¿™äº›panic!()è°ƒç”¨éƒ½åœ¨`#[cfg(test)]`æµ‹è¯•æ¨¡å—ä¸­ï¼Œä¸ä¼šå½±å“ç”Ÿäº§ä»£ç ã€‚æµ‹è¯•ä»£ç ä¸­çš„panic!()æ˜¯æ­£å¸¸çš„æµ‹è¯•å¤±è´¥æœºåˆ¶ã€‚

~~**TODO:**~~
- [x] éªŒè¯panic!()ä½ç½® - ç¡®è®¤ä»…åœ¨æµ‹è¯•ä»£ç ä¸­
- [x] ç¡®è®¤ä¸å½±å“ç”Ÿäº§ç¯å¢ƒ
- [ ] ï¼ˆå¯é€‰ï¼‰å°†æµ‹è¯•ä¸­çš„panic!()æ”¹ä¸ºassert!ä»¥è·å¾—æ›´å¥½çš„é”™è¯¯ä¿¡æ¯

#### 1.2 corint-runtime/src/feature/extractor.rs (NaN handling in sort)

```
æ–‡ä»¶: crates/corint-runtime/src/feature/extractor.rs
è¡Œå·: 164 (ä¸»è¦é—®é¢˜ç‚¹)
é—®é¢˜: ä½¿ç”¨ .unwrap() å¤„ç†æµ®ç‚¹æ¯”è¾ƒï¼ŒNaNå€¼ä¼šå¯¼è‡´panic
ç¤ºä¾‹: values.sort_by(|a, b| a.partial_cmp(b).unwrap())
```

**çŠ¶æ€:** âœ… å·²ä¿®å¤ (2025-12-12)

**ä¿®å¤å†…å®¹:**
1. æ·»åŠ NaNå’ŒInfinityå€¼è¿‡æ»¤ï¼Œåªå¤„ç†æœ‰é™å€¼
2. åœ¨sort_byä¸­ä½¿ç”¨unwrap_orä½œä¸ºåå¤‡
3. å…¶ä»–unwrap()è°ƒç”¨ç»è¿‡å®¡æŸ¥ï¼Œä¸»è¦åœ¨æµ‹è¯•ä»£ç ä¸­æˆ–ä¸ä¼šå¤±è´¥çš„æƒ…å†µï¼ˆå¦‚UNIXæ—¶é—´æˆ³ï¼‰

~~**TODO:**~~
- [x] å®¡è®¡unwrap()è°ƒç”¨ï¼ˆå®é™…åªæœ‰19å¤„ï¼Œé350+ï¼‰
- [x] ä¿®å¤NaN/Infinityå€¼å¤„ç†
- [x] æ·»åŠ å®‰å…¨çš„æ’åºé€»è¾‘
- [x] è¿è¡Œæµ‹è¯•éªŒè¯ - æ‰€æœ‰136ä¸ªæµ‹è¯•é€šè¿‡

#### 1.3 corint-core/src/ast/* (AST getterä¸­çš„panic!)

```
æ–‡ä»¶: crates/corint-core/src/ast/expression.rs, ruleset.rs, pipeline.rs
è¡Œå·: 132, 157, 161, 181, 200, 239, 294, 331, 353
é—®é¢˜: getteræ–¹æ³•ä½¿ç”¨ panic!() è€Œéè¿”å› Option/Result
```

**çŠ¶æ€:** âœ… å·²éªŒè¯ (2025-12-12)

**è¯´æ˜:** ç»è¿‡ä»£ç å®¡æŸ¥ï¼Œè¿™äº›panic!()è°ƒç”¨éƒ½åœ¨`#[cfg(test)]`æµ‹è¯•æ¨¡å—ä¸­ï¼Œä¸ä¼šå½±å“ç”Ÿäº§ä»£ç ã€‚è¿™äº›æ˜¯æµ‹è¯•ä»£ç ä¸­ç”¨äºéªŒè¯æ¨¡å¼åŒ¹é…çš„æ­£å¸¸panic!()è°ƒç”¨ã€‚

~~**TODO:**~~
- [x] å®¡æŸ¥panic!()ä½ç½® - ç¡®è®¤ä»…åœ¨æµ‹è¯•ä»£ç ä¸­
- [ ] ï¼ˆå¯é€‰ï¼‰å°† `get_*()` æ–¹æ³•æ”¹ä¸ºè¿”å› `Option<&T>`ï¼ˆå¦‚æœéœ€è¦ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼‰
- [ ] ï¼ˆå¯é€‰ï¼‰æ·»åŠ  `try_get_*()` å˜ä½“è¿”å› `Result<&T>`

#### 1.4 corint-parser/src/* (è§£æå™¨ä¸­çš„panic!)

```
æ–‡ä»¶: crates/corint-parser/src/pipeline_parser.rs, ruleset_parser.rs, expression_parser.rs
è¡Œå·: 509, 549, 569, 597, 623, 278, 401, 413
é—®é¢˜: å‡è®¾è¾“å…¥ç»“æ„æœ‰æ•ˆï¼Œç¼ºä¹properé”™è¯¯å¤„ç†
```

**çŠ¶æ€:** âœ… å·²éªŒè¯ (2025-12-12)

**è¯´æ˜:** ç»è¿‡ä»£ç å®¡æŸ¥ï¼Œæ‰€æœ‰panic!()è°ƒç”¨éƒ½åœ¨`#[cfg(test)]`æµ‹è¯•æ¨¡å—ä¸­ï¼Œä¸ä¼šå½±å“ç”Ÿäº§ä»£ç ã€‚ç”Ÿäº§ç¯å¢ƒä¸­çš„è§£æå™¨ä½¿ç”¨Result<T, ParseError>è¿”å›é”™è¯¯ã€‚æµ‹è¯•ä¸­çš„panic!()æ˜¯æ­£å¸¸çš„æµ‹è¯•å¤±è´¥æœºåˆ¶ã€‚

~~**TODO:**~~
- [x] å®¡æŸ¥panic!()ä½ç½® - ç¡®è®¤ä»…åœ¨æµ‹è¯•ä»£ç ä¸­
- [x] éªŒè¯ç”Ÿäº§ä»£ç ä½¿ç”¨Resultè¿”å›é”™è¯¯
- [ ] ï¼ˆå¯é€‰ï¼‰æ·»åŠ æ›´å¤šmalformed YAMLæµ‹è¯•ç”¨ä¾‹ä»¥æé«˜æµ‹è¯•è¦†ç›–

---

### 2. ğŸ”´ [P0] å¤±è´¥çš„å•å…ƒæµ‹è¯•

**çŠ¶æ€:** âœ… å·²è§£å†³ (2025-12-12)

~~**å½“å‰çŠ¶æ€:** 3ä¸ªæµ‹è¯•å¤±è´¥~~

~~```
1. corint-runtime: context::tests::test_load_field_not_found
2. corint-sdk: decision_engine::tests::test_ruleset_execution
3. corint-sdk: decision_engine::tests::test_fraud_detection_ruleset
```~~

**éªŒè¯ç»“æœ:**
- âœ… `test_load_field_not_found` - æµ‹è¯•é€šè¿‡
- âœ… `test_ruleset_execution` - æµ‹è¯•é€šè¿‡
- âœ… `test_fraud_detection_ruleset` - æµ‹è¯•é€šè¿‡
- âœ… æ‰€æœ‰æµ‹è¯•å¥—ä»¶é€šè¿‡ (714ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡)

**è¯´æ˜:** è¿™äº›æµ‹è¯•åœ¨ä¹‹å‰çš„ä»£ç æ”¹è¿›ä¸­å·²ç»è¢«ä¿®å¤ï¼Œå½“å‰æ‰€æœ‰æµ‹è¯•100%é€šè¿‡ã€‚

~~**TODO:**~~
- [x] éªŒè¯æ‰€æœ‰æµ‹è¯•çŠ¶æ€
- [x] è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
- [x] ç¡®è®¤æµ‹è¯•é€šè¿‡ç‡100%

---

### 3. ğŸ”´ [P0] æœªå®Œæˆçš„æ ¸å¿ƒåŠŸèƒ½å®ç°

#### 3.1 Redisç¼“å­˜ (TODOæ³¨é‡Š)

```
æ–‡ä»¶: crates/corint-runtime/src/feature/executor.rs
è¡Œå·: 381, 393
å†…å®¹:
  - // TODO: Implement Redis cache lookup
  - // TODO: Implement Redis cache write
å½±å“: ç”Ÿäº§ç¯å¢ƒç¼“å­˜åŠŸèƒ½ç¦ç”¨
```

**TODO:**
- [ ] å®ç° `lookup_redis_cache()` å‡½æ•°
- [ ] å®ç° `write_redis_cache()` å‡½æ•°
- [ ] æ·»åŠ Redisè¿æ¥æ± ç®¡ç†
- [ ] æ·»åŠ ç¼“å­˜å‘½ä¸­ç‡æŒ‡æ ‡
- [ ] æ·»åŠ é›†æˆæµ‹è¯•

#### 3.2 LLM Providerå®ç° (å ä½ç¬¦)

```
æ–‡ä»¶: crates/corint-runtime/src/llm/provider.rs
è¡Œå·: 99, 162
å†…å®¹:
  - // TODO: Actual OpenAI API call
  - // TODO: Actual Anthropic API call
çŠ¶æ€: ä»…å ä½ç¬¦å®ç°
```

**TODO:**
- [ ] å®ç° OpenAI API è°ƒç”¨ (GPT-4, GPT-3.5)
- [ ] å®ç° Anthropic API è°ƒç”¨ (Claude)
- [ ] æ·»åŠ é‡è¯•é€»è¾‘å’Œè¶…æ—¶å¤„ç†
- [ ] å®ç°å“åº”ç¼“å­˜
- [ ] æ·»åŠ é€Ÿç‡é™åˆ¶å¤„ç†
- [ ] æ·»åŠ æˆæœ¬è·Ÿè¸ª

#### 3.3 æ•°æ®æºå®¢æˆ·ç«¯ (å ä½ç¬¦)

```
æ–‡ä»¶: crates/corint-runtime/src/datasource/client.rs
è¡Œå·: 195, 218, 506
å†…å®¹:
  - // TODO: Initialize connection to feature store
  - // TODO: Use redis crate to fetch feature
  - // TODO: Use clickhouse crate to execute query
```

**TODO:**
- [ ] å®ç° PostgreSQL æ•°æ®æºå®¢æˆ·ç«¯
- [ ] å®ç° ClickHouse æ•°æ®æºå®¢æˆ·ç«¯
- [ ] å®ç° Redis æ•°æ®æºå®¢æˆ·ç«¯
- [ ] æ·»åŠ è¿æ¥æ± ç®¡ç†
- [ ] æ·»åŠ å¥åº·æ£€æŸ¥
- [ ] æ·»åŠ æŸ¥è¯¢è¶…æ—¶å¤„ç†

---

## ä»£ç è´¨é‡æ”¹è¿›

### 4. ğŸŸ¢ [P1] æ­»ä»£ç å’Œæœªä½¿ç”¨å±æ€§

**çŠ¶æ€:** âœ… å·²å®Œæˆ (2025-12-12)

~~```
æ–‡ä»¶åŠé—®é¢˜:
1. crates/corint-repository/src/models.rs:60
   - æ–¹æ³• age() ä»æœªä½¿ç”¨

2. crates/corint-runtime/src/llm/provider.rs:66,129
   - #[allow(dead_code)] åœ¨ api_key å­—æ®µä¸Š

3. crates/corint-runtime/src/observability/metrics.rs:10,56
   - Counterå’ŒHistogramçš„nameå­—æ®µæœªä½¿ç”¨

4. crates/corint-runtime/src/result/persistence.rs:88
   - senderå­—æ®µæ ‡è®°ä¸ºå…è®¸æ­»ä»£ç 

5. crates/corint-server/src/repository_loader.rs
   - postgres feature cfgè­¦å‘Š
```~~

**å®Œæˆçš„ä¿®å¤:**

1. âœ… `models.rs:60` - age()æ–¹æ³•ä¿ç•™ï¼ˆè¢«æµ‹è¯•ä½¿ç”¨ï¼‰
2. âœ… `llm/provider.rs` - api_keyå­—æ®µä¿ç•™ï¼ˆä¸ºPhase 3å®ç°é¢„ç•™ï¼Œå¸¦#[allow(dead_code)]ï¼‰
3. âœ… `metrics.rs` - ä¸ºCounterå’ŒHistogramæ·»åŠ äº†name()å’Œlabels() getteræ–¹æ³•
4. âœ… `persistence.rs` - ç§»é™¤#[allow(dead_code)]ï¼ˆsenderå­—æ®µå®é™…è¢«ä½¿ç”¨ï¼‰
5. âœ… `repository_loader.rs` - ä¿®å¤postgres featureé…ç½®ï¼Œæ·»åŠ åˆ°Cargo.toml
6. âœ… `api.rs` - ä¸ºååºåˆ—åŒ–ä¸“ç”¨å­—æ®µæ·»åŠ #[allow(dead_code)]ï¼ˆregistryã€descriptionï¼‰
7. âœ… `main.rs` - æ·»åŠ æ—¥å¿—è¾“å‡ºä½¿ç”¨feature_file_countå˜é‡

~~**TODO:**~~
- [x] å®¡æŸ¥å¹¶ä¿®å¤ `models.rs` ä¸­çš„ `age()` æ–¹æ³•
- [x] ä¸ºmetricså­—æ®µæ·»åŠ getteræ–¹æ³•
- [x] ä¿®å¤postgres feature flagé…ç½®
- [x] è¿è¡Œ `cargo clippy` æ¸…ç†æ‰€æœ‰è­¦å‘Š - **0ä¸ªè­¦å‘Š**

---

### 5. âœ… [P1] é”™è¯¯å¤„ç†ä¸ä¸€è‡´ (å·²å®Œæˆ v1.3)

**å®ŒæˆçŠ¶æ€:** æ ¸å¿ƒé”™è¯¯é“¾è¿½è¸ªå·²å®ç°

**æ”¹è¿›å†…å®¹:**

```
âœ… å·²å®Œæˆ:
1. æ·»åŠ #[source]å±æ€§ - æ‰€æœ‰ä½¿ç”¨#[from]çš„é”™è¯¯ç°åœ¨éƒ½ä¿ç•™æºé”™è¯¯
   - RepositoryError: 4å¤„ (Io, YamlParse, Parser, Database)
   - SdkError: 4å¤„ (ParseError, CompileError, RuntimeError, IoError)
   - ParseError: 1å¤„ (YamlError)
   - ServerError: 2å¤„ (EngineError, InternalError)

2. RuntimeErroræ‰©å±• - æ·»åŠ CoreErrorå˜ä½“æ”¯æŒè‡ªåŠ¨è½¬æ¢
   - å¯ä»¥è‡ªåŠ¨ä»corint_core::error::CoreErrorè½¬æ¢
   - ä¿ç•™å®Œæ•´çš„é”™è¯¯é“¾

3. ServerErroré‡æ„ - ä»æ‰‹åŠ¨å®ç°æ”¹ä¸ºä½¿ç”¨thiserror
   - ä¿ç•™é”™è¯¯ç±»å‹ä¿¡æ¯è€Œéè½¬æ¢ä¸ºString
   - EngineError(SdkError) - ä¿ç•™å®Œæ•´SDKé”™è¯¯
   - InternalError(anyhow::Error) - ä¿ç•™å®Œæ•´anyhowé”™è¯¯

4. æµ‹è¯•æ›´æ–° - æ‰€æœ‰é”™è¯¯ç›¸å…³æµ‹è¯•å·²æ›´æ–°å¹¶é€šè¿‡

é”™è¯¯ç±»å‹ç»“æ„:
- CoreError (corint-core/src/error.rs) - åŸºç¡€ç±»å‹é”™è¯¯
- RuntimeError (corint-runtime/src/error.rs) - è¿è¡Œæ—¶é”™è¯¯ + CoreErrorè½¬æ¢
- CompileError (corint-compiler/src/error.rs) - ç¼–è¯‘é”™è¯¯
- ParseError (corint-parser/src/error.rs) - è§£æé”™è¯¯
- RepositoryError (corint-repository/src/error.rs) - ä»“åº“é”™è¯¯
- SdkError (corint-sdk/src/error.rs) - SDKé¡¶å±‚é”™è¯¯èšåˆ
- ServerError (corint-server/src/error.rs) - HTTPæœåŠ¡å™¨é”™è¯¯
```

**å½±å“åˆ†æ:**
- âœ… é”™è¯¯è°ƒè¯•æ”¹å–„ - ä½¿ç”¨error.source()å¯è¿½è¸ªå®Œæ•´é”™è¯¯é“¾
- âœ… ä»£ç ç®€åŒ– - å‡å°‘æ‰‹åŠ¨map_err()è°ƒç”¨
- âœ… ç±»å‹å®‰å…¨ - ServerErrorä¸å†ä¸¢å¤±åº•å±‚é”™è¯¯ä¿¡æ¯
- âœ… é›¶æ€§èƒ½å½±å“ - é”™è¯¯æ˜¯å†·è·¯å¾„ï¼Œæ€§èƒ½å½±å“å¯å¿½ç•¥

**æœªæ¥æ”¹è¿› (v2.0è€ƒè™‘):**
- [ ] åˆ›å»ºç»Ÿä¸€çš„é”™è¯¯ç ç³»ç»Ÿï¼ˆç”¨äºç¨‹åºåŒ–é”™è¯¯å¤„ç†ï¼‰
- [ ] æ·»åŠ ç»“æ„åŒ–ä¸Šä¸‹æ–‡ï¼ˆspan, backtraceç­‰ï¼‰
- [ ] å‡å°‘é‡å¤çš„é”™è¯¯å˜ä½“ï¼ˆå¦‚TypeErrorï¼‰

å‚è€ƒæ–‡æ¡£: [ARCHITECTURE_ISSUES_IMPACT.md](./ARCHITECTURE_ISSUES_IMPACT.md) ç¬¬1èŠ‚

---

### 6. ğŸŸ¡ [P1] å…¬å…±APIä¸€è‡´æ€§é—®é¢˜

```
é—®é¢˜:
1. Builderæ¨¡å¼ä¸ä¸€è‡´
   - æœ‰äº›è¿”å› Self (fluent API)
   - æœ‰äº›æ¶ˆè´¹å¹¶è¿”å›æ–°å®ä¾‹
   - å‘½åä¸ä¸€è‡´ (with_* vs set_*)

2. é”™è¯¯å¤„ç†å˜ä½“
   - æœ‰äº›è¿”å› Result<T>
   - æœ‰äº›è¿”å› anyhow::Result<T>
   - æœ‰äº›ç›´æ¥panic

3. é…ç½®API
   - DecisionEngineä½¿ç”¨config
   - ServerConfigæ˜¯åˆ†ç¦»çš„
   - Repositoryé…ç½®ä½¿ç”¨ä¸åŒæ¨¡å¼

4. ç±»å‹è½¬æ¢
   - å¤šä¸ª json_to_value() å®ç°
   - From traitä½¿ç”¨ä¸ä¸€è‡´
```

**TODO:**
- [ ] æ ‡å‡†åŒ–Builderæ¨¡å¼ - è€ƒè™‘ä½¿ç”¨ `#[derive(Builder)]` å®
- [ ] ç»Ÿä¸€é”™è¯¯å¤„ç† - æ‰€æœ‰å…¬å…±APIè¿”å› `Result<T, Error>`
- [ ] åˆ›å»ºç»Ÿä¸€çš„Configuration trait
- [ ] å®ç°æ ‡å‡†è½¬æ¢traits (From, Into, TryFrom)
- [ ] åˆ›å»ºAPIè®¾è®¡æŒ‡å—æ–‡æ¡£

---

## æ€§èƒ½ä¼˜åŒ–

### 7. ğŸŸ¡ [P1] è¿‡åº¦Clone

**é«˜é¢‘Cloneä½ç½®:**

```
1. crates/corint-repository/src/postgres.rs (40+å¤„)
   è¡Œå·: 105, 133, 172, 211-212, 240, 252-253, 281, 293-294, 430-433, 446-450, 461
   é—®é¢˜:
   - cached.data.clone() åœ¨ç¼“å­˜å‘½ä¸­æ—¶
   - Arcå…‹éš†ä¼ é€’ç»™tokioä»»åŠ¡

2. crates/corint-repository/src/api.rs
   è¡Œå·: 247, 261, 282, 303, 324, 350, 354, 358, 362
   é—®é¢˜:
   - .map(|a| a.url.clone()) æ”¶é›†URL
   - æ¯æ¬¡è®¿é—®éƒ½å…‹éš†æ•´ä¸ªcontentå­—ç¬¦ä¸²

3. crates/corint-runtime/src/context.rs
   è¡Œå·: 63, 104, 143, 249-256
   é—®é¢˜:
   - peek()?.clone() åœ¨duplicateæ“ä½œ
   - æ”¶é›†å­—ç¬¦ä¸²å€¼æ—¶çš„å¤§é‡clone
```

**TODO:**
- [ ] ç¼“å­˜è¿”å› `Arc<T>` è€Œéå…‹éš†æ•°æ®
- [ ] ä½¿ç”¨ `Cow<'a, T>` å®ç°å€Ÿç”¨/æ‰€æœ‰æƒçµæ´»æ€§
- [ ] å¯¹å°ç±»å‹å®ç° Copy è¯­ä¹‰
- [ ] ä½¿ç”¨ `Arc::clone(&self.x)` æ˜ç¡®æ„å›¾
- [ ] Profileçƒ­è·¯å¾„ç¡®è®¤å½±å“
- [ ] è€ƒè™‘å•çº¿ç¨‹åœºæ™¯ä½¿ç”¨ `Rc<T>`

---

### 8. ğŸŸ¡ [P1] å­—ç¬¦ä¸²åˆ†é…ä¼˜åŒ–

```
é—®é¢˜:
1. è¿‡å¤š .to_string() è°ƒç”¨ï¼ˆå¯ç”¨ &str ä»£æ›¿ï¼‰
2. HashMapé”®å¤§é‡ä½¿ç”¨ Stringï¼ˆå¯ç”¨ &str æˆ– Cowï¼‰
3. format!() åœ¨çƒ­è·¯å¾„ä¸­ä¸å¿…è¦ä½¿ç”¨
```

**TODO:**
- [ ] APIç­¾åä¸­ä½¿ç”¨ `&str` ä»£æ›¿ `String` å‚æ•°
- [ ] HashMapé”®è€ƒè™‘ä½¿ç”¨ `Cow<'static, str>`
- [ ] é¢„åˆ†é…å­—ç¬¦ä¸²ç¼“å†²åŒº
- [ ] ä½¿ç”¨ `String::with_capacity()` é¢„åˆ†é…
- [ ] å¯¹é¢‘ç¹è®¿é—®çš„å€¼å®ç°ç¼“å­˜

---

### 9. ğŸŸ¢ [P2] æ’åºå’Œæ¯”è¾ƒä¼˜åŒ–

```
æ–‡ä»¶: crates/corint-runtime/src/feature/extractor.rs:164
ä»£ç : values.sort_by(|a, b| a.partial_cmp(b).unwrap())
é—®é¢˜:
  - æ¯æ¬¡æ¯”è¾ƒè°ƒç”¨unwrap()
  - NaNå€¼ä¼šå¯¼è‡´panic
```

**TODO:**
- [ ] æ’åºå‰è¿‡æ»¤NaNå€¼
- [ ] ä½¿ç”¨ `total_cmp()` å¤„ç†æµ®ç‚¹æ¯”è¾ƒï¼ˆRust 1.62+ï¼‰
- [ ] æ·»åŠ NaNå¤„ç†æµ‹è¯•ç”¨ä¾‹

---

## æµ‹è¯•è¦†ç›–

### 10. ğŸŸ¡ [P1] æµ‹è¯•è¦†ç›–æå‡

**å½“å‰çŠ¶æ€ (æ¥è‡ªTEST_COVERAGE_ANALYSIS.md):**

| Crate | å•å…ƒæµ‹è¯• | é›†æˆæµ‹è¯• | é€šè¿‡ç‡ |
|-------|---------|---------|--------|
| corint-core | 103 | 0 | 100% |
| corint-parser | 70 | 1 | 100% |
| corint-compiler | 89 | 3 | 100% |
| corint-runtime | 52 | 0 | 99% (1å¤±è´¥) |
| corint-sdk | 4 | 0 | 78% (2å¤±è´¥) |
| corint-repository | 83 | 2 | 100% |
| corint-server | 41 | 0 | 100% |

**å…³é”®ç¼ºå£:**

```
1. corint-sdk (ä¸¥é‡ä¸è¶³)
   - DecisionEngine.decide() æ²¡æœ‰é€šè¿‡çš„æµ‹è¯•
   - ç¼ºå°‘registryè·¯ç”±æµ‹è¯•
   - ç¼ºå°‘feature executoré›†æˆæµ‹è¯•
   - ç¼ºå°‘ç»“æœæŒä¹…åŒ–æµ‹è¯•
   - ç›®æ ‡: ä»9ä¸ªæµ‹è¯•å¢åŠ åˆ°30+

2. corint-runtime
   - ç¼ºå°‘datasourceå®¢æˆ·ç«¯æµ‹è¯•
   - ç¼ºå°‘å¹¶å‘æ‰§è¡Œæµ‹è¯•
   - ç¼ºå°‘featureç¼“å­˜è¡Œä¸ºæµ‹è¯•

3. corint-server
   - ç¼ºå°‘è®¤è¯/æˆæƒæµ‹è¯•
   - ç¼ºå°‘è´Ÿè½½æµ‹è¯•
   - ç¼ºå°‘rate limitingæµ‹è¯•
```

**TODO:**
- [ ] ä¿®å¤corint-runtime 1ä¸ªå¤±è´¥æµ‹è¯•
- [ ] ä¿®å¤corint-sdk 2ä¸ªå¤±è´¥æµ‹è¯•
- [ ] ä¸º `DecisionEngine.decide()` æ·»åŠ å…¨é¢æµ‹è¯•
- [ ] æ·»åŠ æ•°æ®æºå®¢æˆ·ç«¯å•å…ƒæµ‹è¯•
- [ ] æ·»åŠ å¹¶å‘æ‰§è¡Œæµ‹è¯•
- [ ] æ·»åŠ æ€§èƒ½åŸºå‡†æµ‹è¯•
- [ ] å®ç°å±æ€§æµ‹è¯• (proptest)
- [ ] æ·»åŠ fuzzingæµ‹è¯•

---

## æ–‡æ¡£å®Œå–„

### 11. ğŸŸ¢ [P2] å…¬å…±APIæ–‡æ¡£

**ç¼ºå°‘æ–‡æ¡£çš„ä¸»è¦é¡¹ç›®:**

```
1. corint-core/src/ast/mod.rs
   - æ‰€æœ‰å…¬å…±å¯¼å‡ºç¼ºå°‘rustdoc

2. ç¼ºå°‘æ–‡æ¡£çš„å…¬å…±ç»“æ„ä½“/æšä¸¾:
   - CompilerOptions (corint-compiler)
   - SemanticAnalyzer (corint-compiler)
   - TypeChecker (corint-compiler)
   - Validator (corint-core)
   - FeatureExtractor (corint-runtime)
   - DecisionEngine (corint-sdk)
   - å¤šæ•°ASTç±»å‹ (Expression, Operator, Ruleå˜ä½“ç­‰)

3. å‡½æ•°æ–‡æ¡£ä¸å®Œæ•´:
   - Builderæ–¹æ³•ç¼ºå°‘ç¤ºä¾‹
   - ç¼ºå°‘panicå’Œé”™è¯¯æ¡ä»¶è¯´æ˜
   - ç¼ºå°‘ # Examples éƒ¨åˆ†
```

**TODO:**
- [ ] ä¸ºæ‰€æœ‰å…¬å…±é¡¹æ·»åŠ rustdocæ³¨é‡Š
- [ ] æ·»åŠ  `# Examples` éƒ¨åˆ†
- [ ] æ·»åŠ  `# Errors` éƒ¨åˆ†è¯´æ˜é”™è¯¯æ¡ä»¶
- [ ] æ·»åŠ  `# Panics` éƒ¨åˆ†è¯´æ˜panicæ¡ä»¶
- [ ] å¯ç”¨ `#![warn(missing_docs)]` lint
- [ ] è¿è¡Œ `cargo doc --open` éªŒè¯å®Œæ•´æ€§
- [ ] åˆ›å»ºAPIå‚è€ƒç½‘ç«™

---

### 12. ğŸŸ¢ [P2] ä½¿ç”¨æŒ‡å—å’Œç¤ºä¾‹

**TODO:**
- [ ] æ·»åŠ æ›´å¤šexamples/ç›®å½•ç¤ºä¾‹
- [ ] åˆ›å»ºå¸¸è§ç”¨ä¾‹cookbook
- [ ] æ·»åŠ æ€§èƒ½è°ƒä¼˜æŒ‡å—
- [ ] åˆ›å»ºæ•…éšœæ’é™¤æ–‡æ¡£
- [ ] æ·»åŠ è¿ç§»æŒ‡å—ï¼ˆç‰ˆæœ¬å‡çº§ï¼‰

---

## æ¶æ„æ”¹è¿›

### 13. ğŸŸ¡ [P1] æ¨¡å—åŒ–å’Œå…³æ³¨ç‚¹åˆ†ç¦»

**TODO:**
- [ ] å°†json_to_value()æå–åˆ°å…±äº«å·¥å…·æ¨¡å—
- [ ] åˆ›å»ºç»Ÿä¸€çš„é…ç½®åŠ è½½æ¡†æ¶
- [ ] å®ç°æ’ä»¶ç³»ç»Ÿç”¨äºæ‰©å±•
- [ ] åˆ†ç¦»æ ¸å¿ƒé€»è¾‘å’ŒI/Oæ“ä½œ

---

### 14. âœ… [P2] å¯è§‚æµ‹æ€§å®Œå–„ (å·²å®Œæˆ)

**å½“å‰çŠ¶æ€:**
- âœ… TracingåŸºç¡€è®¾æ–½å·²å°±ä½
- âœ… OpenTelemetryé›†æˆå®Œæˆ
- âœ… Prometheus metricså¯¼å‡º
- âœ… åˆ†å¸ƒå¼è¿½è¸ªæ”¯æŒ

**å®Œæˆé¡¹:**
- âœ… æ·»åŠ OpenTelemetryå¯è§‚æµ‹æ€§æ”¯æŒï¼ˆç»Ÿä¸€å®ç°ï¼‰
  - âœ… ä½¿ç”¨OpenTelemetry SDKä½œä¸ºç»Ÿä¸€instrumentationå±‚
  - âœ… é…ç½®Prometheus exporteræš´éœ²/metrics endpointï¼ˆæ”¯æŒPrometheusæŠ“å–ï¼‰
  - âœ… å®ç°åˆ†å¸ƒå¼è¿½è¸ªä¼ æ’­ï¼ˆtrace context propagationï¼‰
  - âœ… æ”¯æŒtraceså¯¼å‡ºåˆ°Jaeger/Zipkinç­‰åç«¯
  - âœ… å®Œæ•´çš„æ–‡æ¡£å’Œç¤ºä¾‹ (crates/corint-runtime/README.md)

**å¾…å®Œæˆé¡¹:**
- [ ] æ·»åŠ å†³ç­–å®¡è®¡æ—¥å¿—
- [ ] åˆ›å»ºGrafanaä»ªè¡¨æ¿æ¨¡æ¿
- [ ] å®Œå–„metricsæ•°æ®é‡‡é›†ï¼ˆä¸šåŠ¡æŒ‡æ ‡ï¼‰

---

## Phase 5+ è·¯çº¿å›¾

### 15. ğŸ”µ [Future] è®¡åˆ’ä¸­çš„åŠŸèƒ½

#### 15.1 SDKå’Œå®¢æˆ·ç«¯

- [ ] Python SDK
- [ ] TypeScript/JavaScript SDK
- [ ] Go SDK
- [ ] Java SDK

#### 15.2 APIæ‰©å±•

- [ ] GraphQL API
- [ ] gRPC API
- [ ] WebSocketæ”¯æŒï¼ˆå®æ—¶è§„åˆ™æ›´æ–°ï¼‰

#### 15.3 ç®¡ç†ç•Œé¢

- [ ] Web UIè§„åˆ™ç®¡ç†ç•Œé¢
- [ ] è§„åˆ™ç‰ˆæœ¬æ§åˆ¶å’Œå›æ»š
- [ ] A/Bæµ‹è¯•æ¡†æ¶
- [ ] è§„åˆ™æ€§èƒ½åˆ†æä»ªè¡¨æ¿

#### 15.4 é«˜çº§åŠŸèƒ½

- [ ] æœºå™¨å­¦ä¹ æ¨¡å‹é›†æˆ
- [ ] é¢„æ„å»ºè§„åˆ™åº“
- [ ] åˆè§„æ¨¡æ¿ (PCI-DSS, GDPR)
- [ ] å¤šåŒºåŸŸéƒ¨ç½²æ”¯æŒ
- [ ] è§„åˆ™å¸‚åœº

#### 15.5 éƒ¨ç½²å’Œè¿ç»´

- [ ] Dockeréƒ¨ç½²æ¨¡æ¿
- [ ] Kubernetes Helm chart
- [ ] Terraformæ¨¡å—
- [ ] CI/CDæµæ°´çº¿æ¨¡æ¿

#### 15.6 Repositoryæ‰©å±•

- [ ] MySQL/MariaDBæ”¯æŒ
- [ ] é«˜çº§æŸ¥è¯¢ï¼ˆè¿‡æ»¤ã€åˆ†é¡µã€æ’åºï¼‰
- [ ] å¤šç§Ÿæˆ·æ”¯æŒ
- [ ] è‡ªåŠ¨è¿ç§»
- [ ] å¯¼å…¥/å¯¼å‡ºå·¥å…·

#### 15.7 å®‰å…¨å¢å¼º

- [ ] JWTè®¤è¯
- [ ] API Keyç®¡ç†
- [ ] è¯·æ±‚é€Ÿç‡é™åˆ¶
- [ ] å®¡è®¡æ—¥å¿—
- [ ] æ•æ„Ÿæ•°æ®è„±æ•

---

## ä¼˜å…ˆçº§æ’åº

### ğŸ”´ P0 - å¿…é¡»ä¿®å¤ï¼ˆç”Ÿäº§é˜»å¡ï¼‰

| ä»»åŠ¡ | æ–‡ä»¶/èŒƒå›´ | ä¼°è®¡å·¥ä½œé‡ | æ¥æº |
|------|---------|-----------|------|
| ~~ä¿®å¤serverä¸­çš„panic!()~~ | ~~rest.rs~~ | ~~1å¤©~~ | âœ… å·²å®Œæˆ |
| ~~ä¿®å¤extractorä¸­çš„unwrap()~~ | ~~extractor.rs~~ | ~~2å¤©~~ | âœ… å·²å®Œæˆ |
| ~~ä¿®å¤3ä¸ªå¤±è´¥æµ‹è¯•~~ | ~~context.rs, decision_engine.rs~~ | ~~1å¤©~~ | âœ… å·²å®Œæˆ |
| å®ç°Redisç¼“å­˜ | executor.rs | 2å¤© | ä¼˜åŒ–å»ºè®® |
| å®ç°LLM providers | provider.rs | 3å¤© | ä¼˜åŒ–å»ºè®® |
| ~~**[æ–°å¢] ä¿®å¤any:é€»è¾‘ç»„ç¼–è¯‘å™¨Bug**~~ | ~~**expression_codegen.rs**~~ | ~~**3å¤©**~~ | **âœ… å·²å®Œæˆ** |
| **[æ–°å¢] ç‰¹å¾å·¥ç¨‹æµ‹è¯•å¥—ä»¶** | **feature_engineering_tests.rs** | **2å¤©** | **è§„åˆ™æ”¹è¿›** |
| **[æ–°å¢] è¡¨è¾¾å¼è¯­è¨€æµ‹è¯•** | **expression_tests.rs** | **1å¤©** | **è§„åˆ™æ”¹è¿›** |
| **[æ–°å¢] ä¸Šä¸‹æ–‡ç®¡ç†æµ‹è¯•** | **context_tests.rs** | **1å¤©** | **è§„åˆ™æ”¹è¿›** |

**æ€»è®¡: ~9å¤©** (åŸ9å¤©ï¼Œå·²å®Œæˆä¿®å¤any:é€»è¾‘ç»„Bug - å·²å®Œæˆé¡¹å·²åˆ’çº¿)

---

### ğŸŸ¡ P1 - é«˜ä¼˜å…ˆçº§ï¼ˆä¸‹ä¸ªè¿­ä»£ï¼‰

#### P1.1 ä»£ç è´¨é‡æ”¹è¿›

| ä»»åŠ¡ | èŒƒå›´ | ä¼°è®¡å·¥ä½œé‡ | æ¥æº | çŠ¶æ€ |
|------|------|-----------|------|------|
| ~~æ¸…ç†æ­»ä»£ç å’Œè­¦å‘Š~~ | ~~å…¨é¡¹ç›®~~ | ~~1å¤©~~ | ä¼˜åŒ–å»ºè®® | âœ… å·²å®Œæˆ |
| ~~ç»Ÿä¸€é”™è¯¯å¤„ç†~~ | ~~å…¨é¡¹ç›®~~ | ~~3å¤©~~ | ä¼˜åŒ–å»ºè®® | âœ… å·²å®Œæˆ |
| æ ‡å‡†åŒ–å…¬å…±API | å…¨é¡¹ç›® | 2å¤© | ä¼˜åŒ–å»ºè®® | |
| ä¼˜åŒ–å…‹éš†æ“ä½œ | repository, runtime | 2å¤© | ä¼˜åŒ–å»ºè®® | |
| æå‡SDKæµ‹è¯•è¦†ç›– | corint-sdk | 2å¤© | ä¼˜åŒ–å»ºè®® | |
| å®ç°æ•°æ®æºå®¢æˆ·ç«¯ | runtime | 3å¤© | ä¼˜åŒ–å»ºè®® | |

#### P1.2 è§„åˆ™DSLåŠŸèƒ½å¢å¼º

| ä»»åŠ¡ | èŒƒå›´ | ä¼°è®¡å·¥ä½œé‡ | æ¥æº | çŠ¶æ€ |
|------|------|-----------|------|------|
| **[æ–°å¢] åŠ¨æ€é˜ˆå€¼å®ç°** | **dynamic_thresholdåŠŸèƒ½** | **5å¤©** | **è§„åˆ™æ”¹è¿›** | |
| **[æ–°å¢] è§„åˆ™ä¾èµ–å’Œä¼˜å…ˆçº§** | **depends_on, priority, groups** | **3å¤©** | **è§„åˆ™æ”¹è¿›** | |
| **[æ–°å¢] å¹¶è¡Œæ‰§è¡Œæ­¥éª¤** | **parallel with merge** | **3å¤©** | **è§„åˆ™æ”¹è¿›** | |
| **[æ–°å¢] Pipelineé«˜çº§ç‰¹æ€§æµ‹è¯•** | **parallel_execution_test.yaml** | **2å¤©** | **è§„åˆ™æ”¹è¿›** | |
| **[æ–°å¢] è§„åˆ™é«˜çº§ç‰¹æ€§æµ‹è¯•** | **rule_advanced_tests.rs** | **2å¤©** | **è§„åˆ™æ”¹è¿›** | |

#### P1.3 å¤–éƒ¨APIé›†æˆ

| ä»»åŠ¡ | èŒƒå›´ | ä¼°è®¡å·¥ä½œé‡ | æ¥æº | çŠ¶æ€ |
|------|------|-----------|------|------|
| **[æ–°å¢] Chainalysis APIé›†æˆ** | **configs/apis/chainalysis.yaml** | **2å¤©** | **è§„åˆ™æ”¹è¿›** | |
| **[æ–°å¢] FingerprintJS APIé›†æˆ** | **configs/apis/fingerprintjs.yaml** | **2å¤©** | **è§„åˆ™æ”¹è¿›** | |
| **[æ–°å¢] MaxMind GeoIPé›†æˆ** | **configs/apis/maxmind.yaml** | **2å¤©** | **è§„åˆ™æ”¹è¿›** | |

**æ€»è®¡: ~30å¤©** (åŸ13å¤©ï¼Œæ–°å¢17å¤© - å·²å®Œæˆé¡¹å·²åˆ’çº¿)

---

### ğŸŸ¢ P2 - ä¸­ä¼˜å…ˆçº§ï¼ˆæŒç»­æ”¹è¿›ï¼‰

#### P2.1 æ–‡æ¡£å’Œç¤ºä¾‹

| ä»»åŠ¡ | èŒƒå›´ | ä¼°è®¡å·¥ä½œé‡ | æ¥æº | çŠ¶æ€ |
|------|------|-----------|------|------|
| å®Œå–„APIæ–‡æ¡£ | å…¨é¡¹ç›® | 3å¤© | ä¼˜åŒ–å»ºè®® | |
| æ·»åŠ æ›´å¤šç¤ºä¾‹ | examples/ | 2å¤© | ä¼˜åŒ–å»ºè®® | |

#### P2.2 æ€§èƒ½å’Œç›‘æ§

| ä»»åŠ¡ | èŒƒå›´ | ä¼°è®¡å·¥ä½œé‡ | æ¥æº | çŠ¶æ€ |
|------|------|-----------|------|------|
| æ€§èƒ½åŸºå‡†æµ‹è¯• | å…¨é¡¹ç›® | 2å¤© | ä¼˜åŒ–å»ºè®® | |
| ~~å®Œå–„metricsæ¡†æ¶~~ | ~~runtime~~ | ~~2å¤©~~ | ä¼˜åŒ–å»ºè®® | âœ… å·²å®Œæˆ(OTel) |
| å­—ç¬¦ä¸²åˆ†é…ä¼˜åŒ– | å…¨é¡¹ç›® | 1å¤© | ä¼˜åŒ–å»ºè®® | |

#### P2.3 è§„åˆ™åœºæ™¯è¡¥å……

| ä»»åŠ¡ | èŒƒå›´ | ä¼°è®¡å·¥ä½œé‡ | æ¥æº | çŠ¶æ€ |
|------|------|-----------|------|------|
| **[æ–°å¢] åˆ›å»ºç™»å½•é£æ§è§„åˆ™é›†** | **login_risk.yaml** | **1å¤©** | **è§„åˆ™æ”¹è¿›** | âš ï¸ éƒ¨åˆ†å®Œæˆ |
| **[æ–°å¢] æ·»åŠ impossible_travelè§„åˆ™** | **impossible_travel.yaml** | **1å¤©** | **è§„åˆ™æ”¹è¿›** | âœ… å·²å®Œæˆ |
| **[æ–°å¢] æ·»åŠ off_hoursæ´»åŠ¨æ£€æµ‹** | **off_hours_activity.yaml** | **1å¤©** | **è§„åˆ™æ”¹è¿›** | |
| **[æ–°å¢] æ·»åŠ å¯†ç å˜æ›´é£é™©æ£€æµ‹** | **password_change_risk.yaml** | **1å¤©** | **è§„åˆ™æ”¹è¿›** | âœ… å·²å®Œæˆ |
| **[æ–°å¢] è®¾å¤‡æ¨¡æ‹Ÿå™¨æ£€æµ‹** | **device_emulator.yaml** | **1å¤©** | **è§„åˆ™æ”¹è¿›** | âœ… å·²å®Œæˆ |
| **[æ–°å¢] è®¾å¤‡æ¬ºéª—æ£€æµ‹** | **device_spoofing.yaml** | **1å¤©** | **è§„åˆ™æ”¹è¿›** | âœ… å·²å®Œæˆ |
| **[æ–°å¢] åˆ›å»ºKYCéªŒè¯è§„åˆ™é›†** | **kyc_verification.yaml** | **2å¤©** | **è§„åˆ™æ”¹è¿›** | |
| **[æ–°å¢] èº«ä»½é‡ç”¨æ£€æµ‹** | **identity_reuse.yaml** | **1å¤©** | **è§„åˆ™æ”¹è¿›** | |
| **[æ–°å¢] æ”¶å…¥ä¸ä¸€è‡´æ£€æµ‹** | **income_inconsistency.yaml** | **1å¤©** | **è§„åˆ™æ”¹è¿›** | |

#### P2.4 ç‰¹å¾å·¥ç¨‹å¢å¼º

| ä»»åŠ¡ | èŒƒå›´ | ä¼°è®¡å·¥ä½œé‡ | æ¥æº | çŠ¶æ€ |
|------|------|-----------|------|------|
| **[æ–°å¢] ç»Ÿè®¡å¼‚å¸¸æ£€æµ‹ç‰¹æ€§** | **zscore, percentile_check** | **3å¤©** | **è§„åˆ™æ”¹è¿›** | |
| **[æ–°å¢] å…³è”åˆ†æç‰¹æ€§** | **IP/è®¾å¤‡/ç”¨æˆ·å…³è”** | **2å¤©** | **è§„åˆ™æ”¹è¿›** | |
| **[æ–°å¢] å¤–éƒ¨æœåŠ¡é›†æˆæµ‹è¯•** | **API mockæµ‹è¯•** | **2å¤©** | **è§„åˆ™æ”¹è¿›** | |
| **[æ–°å¢] é”™è¯¯å¤„ç†æµ‹è¯•** | **error_handling_tests.rs** | **2å¤©** | **è§„åˆ™æ”¹è¿›** | |

**æ€»è®¡: ~28å¤©** (åŸ10å¤©ï¼Œæ–°å¢18å¤© - å·²å®Œæˆé¡¹å·²åˆ’çº¿)

---

### ğŸŸ¢ P3 - Web3/åŠ å¯†è´§å¸è§„åˆ™ï¼ˆç¬¬ä¸‰é˜¶æ®µï¼‰

| ä»»åŠ¡ | èŒƒå›´ | ä¼°è®¡å·¥ä½œé‡ | æ¥æº | çŠ¶æ€ |
|------|------|-----------|------|------|
| **[æ–°å¢] é«˜é£é™©é’±åŒ…æ£€æµ‹** | **high_risk_wallet.yaml** | **2å¤©** | **è§„åˆ™æ”¹è¿›** | |
| **[æ–°å¢] æ´—äº¤æ˜“æ¨¡å¼æ£€æµ‹** | **wash_trading.yaml** | **2å¤©** | **è§„åˆ™æ”¹è¿›** | |
| **[æ–°å¢] å¯è§‚æµ‹æ€§æµ‹è¯•** | **observability_tests.rs** | **1å¤©** | **è§„åˆ™æ”¹è¿›** | |

**æ€»è®¡: ~5å¤©**

---

### ğŸ”µ Future - é•¿æœŸè§„åˆ’

#### Future.1 LLMé›†æˆ (æš‚ç¼“ - å¾…åŠŸèƒ½ç¨³å®š)

| ä»»åŠ¡ | èŒƒå›´ | ä¼°è®¡å·¥ä½œé‡ | æ¥æº | çŠ¶æ€ |
|------|------|-----------|------|------|
| **[æ–°å¢] LLMæ¨ç†æ­¥éª¤** | **ç®¡é“LLMåˆ†æ** | **5å¤©** | **è§„åˆ™æ”¹è¿›** | *æš‚ç¼“* |
| **[æ–°å¢] inferåŠ¨ä½œ** | **å¼‚æ­¥AIåˆ†æ** | **3å¤©** | **è§„åˆ™æ”¹è¿›** | *æš‚ç¼“* |
| **[æ–°å¢] LLMé›†æˆæµ‹è¯•** | **llm_integration_tests.rs** | **2å¤©** | **è§„åˆ™æ”¹è¿›** | *æš‚ç¼“* |

#### Future.2 SDKå’Œå®¢æˆ·ç«¯

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | ä¾èµ– | æ¥æº |
|------|--------|------|------|
| Python SDK | é«˜ | ç¨³å®šAPI | ä¼˜åŒ–å»ºè®® |
| TypeScript/JavaScript SDK | é«˜ | ç¨³å®šAPI | è§„åˆ™æ”¹è¿› |
| Go SDK | ä¸­ | ç¨³å®šAPI | è§„åˆ™æ”¹è¿› |
| Java SDK | ä¸­ | ç¨³å®šAPI | è§„åˆ™æ”¹è¿› |

#### Future.3 ç®¡ç†ç•Œé¢

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | ä¾èµ– | æ¥æº |
|------|--------|------|------|
| Web UI | é«˜ | REST APIå®Œå–„ | ä¼˜åŒ–å»ºè®® |
| è§„åˆ™ç‰ˆæœ¬æ§åˆ¶å’Œå›æ»š | é«˜ | Repositoryæ‰©å±• | è§„åˆ™æ”¹è¿› |
| A/Bæµ‹è¯•æ¡†æ¶ | ä¸­ | Web UI | è§„åˆ™æ”¹è¿› |
| è§„åˆ™æ€§èƒ½åˆ†æä»ªè¡¨æ¿ | ä¸­ | Observability | è§„åˆ™æ”¹è¿› |

#### Future.4 éƒ¨ç½²å’Œè¿ç»´

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | ä¾èµ– | æ¥æº |
|------|--------|------|------|
| Kuberneteséƒ¨ç½² | ä¸­ | Dockeræ¨¡æ¿ | ä¼˜åŒ–å»ºè®® |
| Dockeréƒ¨ç½²æ¨¡æ¿ | é«˜ | - | è§„åˆ™æ”¹è¿› |
| Terraformæ¨¡å— | ä¸­ | K8s | è§„åˆ™æ”¹è¿› |
| CI/CDæµæ°´çº¿æ¨¡æ¿ | ä¸­ | - | è§„åˆ™æ”¹è¿› |

#### Future.5 é«˜çº§åŠŸèƒ½

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | ä¾èµ– | æ¥æº |
|------|--------|------|------|
| GraphQL API | ä¸­ | æ ¸å¿ƒç¨³å®š | ä¼˜åŒ–å»ºè®® |
| gRPC API | ä¸­ | æ ¸å¿ƒç¨³å®š | è§„åˆ™æ”¹è¿› |
| WebSocketæ”¯æŒ | ä½ | æ ¸å¿ƒç¨³å®š | è§„åˆ™æ”¹è¿› |
| æœºå™¨å­¦ä¹ æ¨¡å‹é›†æˆ | ä½ | æ€§èƒ½ä¼˜åŒ– | ä¼˜åŒ–å»ºè®® |
| é¢„æ„å»ºè§„åˆ™åº“ | ä¸­ | è§„åˆ™ç¨³å®š | è§„åˆ™æ”¹è¿› |
| åˆè§„æ¨¡æ¿ (PCI-DSS, GDPR) | ä¸­ | è§„åˆ™ç¨³å®š | è§„åˆ™æ”¹è¿› |

---

## è§„åˆ™DSLåŠŸèƒ½å¢å¼º (æ¥è‡ªRULE_IMPROVEMENT_RECOMMENDATIONS.md)

### 16. ~~ğŸ”´ [P0] any:é€»è¾‘ç»„ç¼–è¯‘å™¨Bug~~ âœ… å·²å®Œæˆ

**é—®é¢˜æè¿°:**
~~å½“å‰åœ¨ä½¿ç”¨ `any:` é€»è¾‘ç»„æ—¶ä¼šå¯¼è‡´è¿è¡Œæ—¶ "Stack underflow" é”™è¯¯ã€‚~~

**å½±å“:**
- ~~æ— æ³•åœ¨è§„åˆ™ä¸­ä½¿ç”¨ORé€»è¾‘ç»„åˆå¤šä¸ªæ¡ä»¶~~
- ~~å¿…é¡»å°†ORæ¡ä»¶æ‹†åˆ†æˆå¤šä¸ªç‹¬ç«‹è§„åˆ™~~

**~~ä¸´æ—¶è§£å†³æ–¹æ¡ˆ:~~**
~~å·²å°† `account_takeover.yaml` æ‹†åˆ†æˆä¸‰ä¸ªç‹¬ç«‹è§„åˆ™:~~
- ~~`account_takeover_new_device.yaml` - æ£€æŸ¥æ–°è®¾å¤‡~~
- ~~`account_takeover_failed_logins.yaml` - æ£€æŸ¥å¤±è´¥ç™»å½•~~
- ~~`account_takeover_geo_change.yaml` - æ£€æŸ¥åœ°ç†ä½ç½®å˜åŒ–~~

**âœ… è§£å†³æ–¹æ¡ˆ (å·²å®Œæˆ - 2025-12-14):**
- âœ… è°ƒè¯•å¹¶ä¿®å¤ `expression_codegen.rs` ä¸­çš„ `compile_any_conditions()` å‡½æ•°
- âœ… ä¿®å¤JumpIfTrue/JumpIfFalseæŒ‡ä»¤çš„æ ˆæ“ä½œé€»è¾‘ - ç§»é™¤é”™è¯¯çš„Dup+Jump+Popæ¨¡å¼
- âœ… æ·»åŠ 6ä¸ªå•å…ƒæµ‹è¯•è¦†ç›–any:/all:é€»è¾‘ç»„
- âœ… æ·»åŠ é›†æˆæµ‹è¯•éªŒè¯æ— æ ˆæº¢å‡º
- âœ… å°†ä¸‰ä¸ªæ‹†åˆ†è§„åˆ™åˆå¹¶å›å•ä¸ªç»Ÿä¸€çš„ `account_takeover.yaml`

**ç›¸å…³æ–‡ä»¶:**
- [crates/corint-compiler/src/codegen/expression_codegen.rs](crates/corint-compiler/src/codegen/expression_codegen.rs#L113-L267) - âœ… å·²ä¿®å¤
- [crates/corint-runtime/src/executor.rs](crates/corint-runtime/src/executor.rs#L67-L83)
- [repository/library/rules/fraud/account_takeover.yaml](repository/library/rules/fraud/account_takeover.yaml) - âœ… å·²åˆå¹¶

---

### 17. ğŸŸ¡ [P1] åŠ¨æ€é˜ˆå€¼åŠŸèƒ½

**åŠŸèƒ½æè¿°:**
å®ç°è‡ªé€‚åº”é˜ˆå€¼ï¼Œä½¿ç”¨ç»Ÿè®¡æ–¹æ³•ï¼ˆç™¾åˆ†ä½æ•°ã€æ ‡å‡†å·®ã€ç§»åŠ¨å¹³å‡ï¼‰åŠ¨æ€è°ƒæ•´è§„åˆ™é˜ˆå€¼ã€‚

**ç”¨ä¾‹:**
```yaml
rule:
  id: amount_outlier_pattern
  when:
    conditions:
      - event.transaction.amount > dynamic_threshold.value

  dynamic_threshold:
    id: user_amount_threshold
    source:
      metric: transaction.amount
      entity: user.id
    method: percentile
    percentile:
      value: 95
      window: 30d
      min_samples: 10
    bounds:
      min: 100
      max: 100000
```

**TODO:**
- [ ] åœ¨ASTä¸­æ·»åŠ DynamicThresholdèŠ‚ç‚¹
- [ ] å®ç°percentileã€stddevã€moving_averageæ–¹æ³•
- [ ] æ·»åŠ ç¼“å­˜æœºåˆ¶é¿å…é‡å¤è®¡ç®—
- [ ] æ”¯æŒæ—¶é—´åˆ†æ®µï¼ˆå·¥ä½œæ—¶é—´/éå·¥ä½œæ—¶é—´ä¸åŒé˜ˆå€¼ï¼‰
- [ ] æ·»åŠ æµ‹è¯•ç”¨ä¾‹

**ä¼°è®¡å·¥ä½œé‡:** 5å¤©

---

### 18. ğŸŸ¡ [P1] è§„åˆ™ä¾èµ–å’Œä¼˜å…ˆçº§

**åŠŸèƒ½æè¿°:**
æ”¯æŒè§„åˆ™é—´ä¾èµ–å…³ç³»ã€æ‰§è¡Œä¼˜å…ˆçº§å’Œè§„åˆ™åˆ†ç»„ï¼ˆäº’æ–¥ç»„ï¼‰ã€‚

**ç”¨ä¾‹:**
```yaml
rule:
  id: sophisticated_fraud_pattern
  priority: 500

  depends_on:
    - rule: fraud_farm_pattern
      required: true
    - rule: account_takeover_pattern
      required: false
      on_missing: continue

  group: geo_risk_level
  group_priority: 3

  when:
    conditions:
      - context.rules.fraud_farm_pattern.triggered == true
```

**TODO:**
- [ ] åœ¨Rule ASTä¸­æ·»åŠ priorityã€depends_onã€groupå­—æ®µ
- [ ] å®ç°è§„åˆ™ä¾èµ–è§£æå’ŒéªŒè¯ï¼ˆæ£€æµ‹å¾ªç¯ä¾èµ–ï¼‰
- [ ] å®ç°è§„åˆ™æ‰§è¡Œé¡ºåºæ’åºï¼ˆæ‹“æ‰‘æ’åºï¼‰
- [ ] å®ç°äº’æ–¥ç»„é€»è¾‘ï¼ˆåŒç»„åªæ‰§è¡Œæœ€é«˜ä¼˜å…ˆçº§åŒ¹é…çš„è§„åˆ™ï¼‰
- [ ] æ·»åŠ ä¾èµ–è§„åˆ™ç»“æœè®¿é—®ï¼ˆcontext.rules.xxxï¼‰
- [ ] æ·»åŠ æµ‹è¯•ç”¨ä¾‹

**ä¼°è®¡å·¥ä½œé‡:** 3å¤©

---

### 19. ğŸŸ¡ [P1] å¹¶è¡Œæ‰§è¡Œæ­¥éª¤

**åŠŸèƒ½æè¿°:**
åœ¨Pipelineä¸­æ”¯æŒå¹¶è¡Œæ‰§è¡Œå¤šä¸ªæ­¥éª¤ï¼Œå¹¶æä¾›ä¸åŒçš„åˆå¹¶ç­–ç•¥ã€‚

**ç”¨ä¾‹:**
```yaml
pipeline:
  steps:
    - parallel:
        - type: api
          id: ip_check
          api: ipinfo
        - type: api
          id: device_check
          api: fingerprintjs
        - type: api
          id: email_check
          api: emailrep
      merge:
        method: all  # all, any, first
        timeout: 5000
```

**TODO:**
- [ ] åœ¨Pipeline ASTä¸­æ·»åŠ ParallelStepèŠ‚ç‚¹
- [ ] å®ç°å¹¶è¡Œæ‰§è¡Œå™¨ï¼ˆä½¿ç”¨tokio::spawnï¼‰
- [ ] å®ç°mergeç­–ç•¥ï¼ˆall/any/firstï¼‰
- [ ] æ·»åŠ è¶…æ—¶å¤„ç†
- [ ] å¤„ç†éƒ¨åˆ†å¤±è´¥åœºæ™¯
- [ ] æ·»åŠ å¹¶å‘é™åˆ¶é…ç½®
- [ ] æ·»åŠ æµ‹è¯•ç”¨ä¾‹

**ä¼°è®¡å·¥ä½œé‡:** 3å¤©

---

### 20. ğŸŸ¡ [P1] å¤–éƒ¨APIé›†æˆæ‰©å±•

**å½“å‰çŠ¶æ€:** ä»…é›†æˆäº†ipinfo API

**å¾…é›†æˆAPI:**

#### 20.1 Chainalysis - åŒºå—é“¾é£é™©åˆ†æ
- é’±åŒ…åœ°å€é£é™©è¯„åˆ†
- åˆ¶è£åˆ—è¡¨æ£€æŸ¥
- æš—ç½‘/æ··å¸å™¨æ£€æµ‹

#### 20.2 FingerprintJS - è®¾å¤‡æŒ‡çº¹
- è®¾å¤‡å”¯ä¸€æ€§è¯†åˆ«
- æœºå™¨äººæ£€æµ‹
- éšèº«æ¨¡å¼æ£€æµ‹

#### 20.3 MaxMind GeoIP2 - IPæƒ…æŠ¥
- ç²¾ç¡®åœ°ç†å®šä½
- VPN/ä»£ç†æ£€æµ‹
- Torå‡ºå£èŠ‚ç‚¹æ£€æµ‹
- åŒ¿åæœåŠ¡æ£€æµ‹

**TODO:**
- [ ] åˆ›å»º `configs/apis/chainalysis.yaml`
- [ ] åˆ›å»º `configs/apis/fingerprintjs.yaml`
- [ ] åˆ›å»º `configs/apis/maxmind.yaml`
- [ ] å®ç°APIå®¢æˆ·ç«¯å’Œå“åº”è§£æ
- [ ] æ·»åŠ é€Ÿç‡é™åˆ¶å’Œç¼“å­˜
- [ ] æ·»åŠ é”™è¯¯å¤„ç†å’Œfallback
- [ ] æ·»åŠ é›†æˆæµ‹è¯•

**ä¼°è®¡å·¥ä½œé‡:** 6å¤© (æ¯ä¸ªAPI 2å¤©)

---

## è§„åˆ™åœºæ™¯è¡¥å……

### 21. ğŸŸ¢ [P2] è´¦æˆ·å®‰å…¨åœºæ™¯

**å·²å®Œæˆ:**
- âœ… Impossible Travel Detection ([impossible_travel_detection.yaml](repository/library/rules/fraud/impossible_travel_detection.yaml))
- âœ… Password Change Risk ([password_change_risk.yaml](repository/library/rules/fraud/password_change_risk.yaml))

**å¾…å®ç°:**

#### 21.1 Off-Hours Activity Detection
```yaml
rule:
  id: off_hours_activity
  when:
    conditions:
      - hour(event.timestamp) >= 22 || hour(event.timestamp) <= 6
      - event.transaction.amount > 5000
  score: 35
```

**TODO:**
- [ ] åˆ›å»º `library/rules/account/off_hours_activity.yaml`
- [ ] å®ç°hour()æ—¶é—´å‡½æ•°
- [ ] æ”¯æŒå·¥ä½œæ—¶é—´é…ç½®ï¼ˆå¯æŒ‰ç”¨æˆ·æ—¶åŒºè°ƒæ•´ï¼‰
- [ ] æ·»åŠ åˆ°login_riskè§„åˆ™é›†

**ä¼°è®¡å·¥ä½œé‡:** 1å¤©

---

### 22. ğŸŸ¢ [P2] è®¾å¤‡ä¿¡ä»»åœºæ™¯

**å·²å®Œæˆ:**
- âœ… Device Emulator Detection ([device_emulator.yaml](repository/library/rules/fraud/device_emulator.yaml))
- âœ… Device Spoofing Detection ([device_spoofing.yaml](repository/library/rules/fraud/device_spoofing.yaml))

**çŠ¶æ€:** è®¾å¤‡ä¿¡ä»»åœºæ™¯å·²å®ŒæˆåŸºç¡€å®ç°

---

### 23. ğŸŸ¢ [P2] KYCéªŒè¯åœºæ™¯

#### 23.1 Identity Reuse Detection
æ£€æµ‹åŒä¸€èº«ä»½ä¿¡æ¯è¢«å¤šæ¬¡ä½¿ç”¨ï¼ˆåˆæˆèº«ä»½æ¬ºè¯ˆï¼‰

```yaml
rule:
  id: identity_reuse_detection
  when:
    conditions:
      - count_distinct(user.id, {user.phone == event.user.phone}, last_90d) > 2
      - count_distinct(user.id, {user.id_number == event.user.id_number}, last_365d) > 1
  score: 95
```

#### 23.2 Income Inconsistency Detection
æ£€æµ‹æ”¶å…¥ä¸ç”³è¯·é‡‘é¢ä¸åŒ¹é…

```yaml
rule:
  id: income_inconsistency
  when:
    event.type: loan_application
    conditions:
      - applicant.income < 3000
      - applicant.request_amount > applicant.income * 3
  score: 60
```

**TODO:**
- [ ] åˆ›å»º `library/rules/credit/identity_reuse.yaml`
- [ ] åˆ›å»º `library/rules/credit/income_inconsistency.yaml`
- [ ] åˆ›å»º `library/rulesets/kyc_verification.yaml`
- [ ] æ·»åŠ æµ‹è¯•ç”¨ä¾‹

**ä¼°è®¡å·¥ä½œé‡:** 4å¤©

---

### 24. ğŸŸ¢ [P3] Web3/åŠ å¯†è´§å¸åœºæ™¯

#### 24.1 High-Risk Wallet Detection
æ£€æµ‹ä¸é«˜é£é™©é’±åŒ…çš„äº¤äº’ï¼ˆéœ€è¦Chainalysisé›†æˆï¼‰

```yaml
rule:
  id: high_risk_wallet
  when:
    conditions:
      - external_api.Chainalysis.risk_score > 80
      - any:
          - external_api.Chainalysis.categories contains "sanctions"
          - external_api.Chainalysis.categories contains "darknet"
          - external_api.Chainalysis.categories contains "mixer"
  score: 100
```

#### 24.2 Wash Trading Detection
æ£€æµ‹æ´—äº¤æ˜“æ¨¡å¼

```yaml
rule:
  id: wash_trading_pattern
  when:
    conditions:
      - count(transfers, {recipient == sender}, last_24h) >= 3
      - total_amount_circular_24h > 10000
  score: 90
```

**TODO:**
- [ ] åˆ›å»º `library/rules/crypto/high_risk_wallet.yaml`
- [ ] åˆ›å»º `library/rules/crypto/wash_trading.yaml`
- [ ] ä¾èµ–: å…ˆå®ŒæˆChainalysis APIé›†æˆ
- [ ] æ·»åŠ æµ‹è¯•ç”¨ä¾‹

**ä¼°è®¡å·¥ä½œé‡:** 4å¤©

---

## ç‰¹å¾å·¥ç¨‹å¢å¼º

### 25. ğŸŸ¢ [P2] ç»Ÿè®¡å¼‚å¸¸æ£€æµ‹ç‰¹æ€§

**åŠŸèƒ½æè¿°:**
æ·»åŠ åŸºäºç»Ÿè®¡å­¦çš„å¼‚å¸¸æ£€æµ‹ç‰¹å¾æ“ä½œç¬¦ã€‚

**æ–°å¢æ“ä½œç¬¦:**

#### 25.1 zscore - Z-Scoreè®¡ç®—
```yaml
features:
  - name: transaction_zscore
    operator: zscore
    field: amount
    dimension: user_id
    window: 30d
```

#### 25.2 percentile_check - ç™¾åˆ†ä½æ£€æŸ¥
```yaml
features:
  - name: is_amount_outlier_p95
    operator: percentile_check
    field: amount
    percentile: 95
    window: 90d
```

#### 25.3 velocity_ratio - é€Ÿåº¦å˜åŒ–ç‡
```yaml
features:
  - name: spending_velocity_ratio
    operator: velocity_ratio
    field: amount
    numerator_window: 24h
    denominator_window: 7d
```

**TODO:**
- [ ] åœ¨FeatureOperatoræšä¸¾ä¸­æ·»åŠ æ–°æ“ä½œç¬¦
- [ ] å®ç°zscoreè®¡ç®—é€»è¾‘
- [ ] å®ç°percentile_checké€»è¾‘
- [ ] å®ç°velocity_ratioé€»è¾‘
- [ ] æ·»åŠ æµ‹è¯•ç”¨ä¾‹
- [ ] æ›´æ–°æ–‡æ¡£

**ä¼°è®¡å·¥ä½œé‡:** 3å¤©

---

### 26. ğŸŸ¢ [P2] å…³è”åˆ†æç‰¹æ€§

**åŠŸèƒ½æè¿°:**
æ”¯æŒè·¨ç»´åº¦å…³è”åˆ†æï¼ˆIP-è®¾å¤‡ã€IP-ç”¨æˆ·ã€è®¾å¤‡-ç”¨æˆ·ï¼‰ã€‚

**ç¤ºä¾‹ç‰¹å¾:**

```yaml
features:
  # IP â†’ è®¾å¤‡å…³è”
  - name: devices_per_ip_5h
    operator: count_distinct
    dimension: ip_address
    distinct_field: device_id
    window: 5h

  # IP â†’ ç”¨æˆ·å…³è”
  - name: users_per_ip_5h
    operator: count_distinct
    dimension: ip_address
    distinct_field: user_id
    window: 5h

  # è®¾å¤‡ â†’ ç”¨æˆ·å…³è”
  - name: users_per_device_24h
    operator: count_distinct
    dimension: device_id
    distinct_field: user_id
    window: 24h
```

**TODO:**
- [ ] æ‰©å±•count_distinctæ”¯æŒå¤šç»´åº¦åˆ†æ
- [ ] ä¼˜åŒ–å…³è”æŸ¥è¯¢æ€§èƒ½ï¼ˆä½¿ç”¨ç´¢å¼•ï¼‰
- [ ] æ·»åŠ ç¼“å­˜é¿å…é‡å¤è®¡ç®—
- [ ] æ·»åŠ æµ‹è¯•ç”¨ä¾‹

**ä¼°è®¡å·¥ä½œé‡:** 2å¤©

---

## æµ‹è¯•è¦†ç›–è¡¥å…… (æ¥è‡ªRULE_IMPROVEMENT_RECOMMENDATIONS.md)

### 27. ğŸ”´ [P0] ç‰¹å¾å·¥ç¨‹æµ‹è¯•å¥—ä»¶

**ä¸¥é‡æ€§:** Critical - æ ¸å¿ƒåŠŸèƒ½ä¸¥é‡ç¼ºå¤±æµ‹è¯•

**å½“å‰çŠ¶æ€:** è¦†ç›–ç‡ä»…5%

**TODO:**
- [ ] åˆ›å»º `crates/corint-runtime/tests/feature_engineering_tests.rs`
- [ ] æµ‹è¯•features.xxxå‘½åç©ºé—´è®¿é—®
- [ ] æµ‹è¯•count_distinctæ“ä½œç¬¦
- [ ] æµ‹è¯•percentileè®¡ç®—
- [ ] æµ‹è¯•velocityè®¡ç®—
- [ ] æµ‹è¯•èšåˆå‡½æ•°ï¼ˆsum, avg, maxï¼‰
- [ ] æµ‹è¯•æ—¶é—´çª—å£åŠŸèƒ½
- [ ] æµ‹è¯•ç»´åº¦è¿‡æ»¤

**ä¼°è®¡å·¥ä½œé‡:** 2å¤©

---

### 28. ğŸ”´ [P0] è¡¨è¾¾å¼è¯­è¨€æµ‹è¯•

**å½“å‰çŠ¶æ€:** è¦†ç›–ç‡30%

**TODO:**
- [ ] åˆ›å»º `crates/corint-runtime/tests/expression_tests.rs`
- [ ] æµ‹è¯•é€»è¾‘è¿ç®—ç¬¦ï¼ˆAND, OR, NOTï¼‰
- [ ] æµ‹è¯•æ¯”è¾ƒè¿ç®—ç¬¦ï¼ˆ==, !=, >, <, >=, <=ï¼‰
- [ ] æµ‹è¯•æˆå‘˜è¿ç®—ç¬¦ï¼ˆin, containsï¼‰
- [ ] æµ‹è¯•æ—¶é—´å‡½æ•°ï¼ˆhours_since, days_sinceï¼‰
- [ ] æµ‹è¯•å­—ç¬¦ä¸²å‡½æ•°
- [ ] æµ‹è¯•æ•°å­¦è¿ç®—

**ä¼°è®¡å·¥ä½œé‡:** 1å¤©

---

### 29. ğŸ”´ [P0] ä¸Šä¸‹æ–‡ç®¡ç†æµ‹è¯•

**å½“å‰çŠ¶æ€:** è¦†ç›–ç‡20%

**TODO:**
- [ ] åˆ›å»º `crates/corint-runtime/tests/context_tests.rs`
- [ ] æµ‹è¯•event.*å‘½åç©ºé—´è®¿é—®
- [ ] æµ‹è¯•context.*å‘½åç©ºé—´è®¿é—®
- [ ] æµ‹è¯•vars.*å‘½åç©ºé—´è®¿é—®
- [ ] æµ‹è¯•è·¨æ­¥éª¤æ•°æ®æµ
- [ ] æµ‹è¯•æ ˆæ“ä½œï¼ˆpush, pop, peekï¼‰
- [ ] æµ‹è¯•contextéš”ç¦»

**ä¼°è®¡å·¥ä½œé‡:** 1å¤©

---

### 30. ğŸŸ¡ [P1] Pipelineé«˜çº§ç‰¹æ€§æµ‹è¯•

**TODO:**
- [ ] åˆ›å»º `repository/tests/pipelines/parallel_execution_test.yaml`
- [ ] æµ‹è¯•å¹¶è¡Œæ‰§è¡Œwith merge strategies
- [ ] æµ‹è¯•åˆ†æ”¯æ‰§è¡Œï¼ˆbranchï¼‰
- [ ] æµ‹è¯•èšåˆæ­¥éª¤ï¼ˆaggregateï¼‰
- [ ] æµ‹è¯•è¶…æ—¶å¤„ç†
- [ ] æµ‹è¯•éƒ¨åˆ†å¤±è´¥åœºæ™¯

**ä¼°è®¡å·¥ä½œé‡:** 2å¤©

---

### 31. ğŸŸ¡ [P1] è§„åˆ™é«˜çº§ç‰¹æ€§æµ‹è¯•

**TODO:**
- [ ] åˆ›å»º `crates/corint-runtime/tests/rule_advanced_tests.rs`
- [ ] æµ‹è¯•è´Ÿåˆ†æ•°è§„åˆ™
- [ ] æµ‹è¯•åŠ¨æ€é˜ˆå€¼
- [ ] æµ‹è¯•è§„åˆ™ä¾èµ–
- [ ] æµ‹è¯•è§„åˆ™ä¼˜å…ˆçº§æ’åº
- [ ] æµ‹è¯•äº’æ–¥è§„åˆ™ç»„

**ä¼°è®¡å·¥ä½œé‡:** 2å¤©

---

### 32. ğŸŸ¢ [P2] å¤–éƒ¨æœåŠ¡é›†æˆæµ‹è¯•

**TODO:**
- [ ] åˆ›å»ºAPI mockæµ‹è¯•æ¡†æ¶
- [ ] æµ‹è¯•å¤–éƒ¨APIè°ƒç”¨å’Œå“åº”è§£æ
- [ ] æµ‹è¯•æ•°æ®åº“æŸ¥è¯¢
- [ ] æµ‹è¯•ç¼“å­˜è¯»å†™
- [ ] æµ‹è¯•é‡è¯•é€»è¾‘
- [ ] æµ‹è¯•è¶…æ—¶å¤„ç†
- [ ] æµ‹è¯•circuit breaker

**ä¼°è®¡å·¥ä½œé‡:** 2å¤©

---

### 33. ğŸŸ¢ [P2] é”™è¯¯å¤„ç†æµ‹è¯•

**TODO:**
- [ ] åˆ›å»º `crates/corint-runtime/tests/error_handling_tests.rs`
- [ ] æµ‹è¯•fallbackç­–ç•¥
- [ ] æµ‹è¯•retryé€»è¾‘
- [ ] æµ‹è¯•circuit breaker
- [ ] æµ‹è¯•é”™è¯¯é“¾ä¼ æ’­
- [ ] æµ‹è¯•graceful degradation

**ä¼°è®¡å·¥ä½œé‡:** 2å¤©

---

### 34. ğŸŸ¢ [P3] å¯è§‚æµ‹æ€§æµ‹è¯•

**TODO:**
- [ ] åˆ›å»º `crates/corint-runtime/tests/observability_tests.rs`
- [ ] æµ‹è¯•metricsé‡‡é›†
- [ ] æµ‹è¯•æ—¥å¿—è¾“å‡º
- [ ] æµ‹è¯•trace propagation
- [ ] æµ‹è¯•é‡‡æ ·ç‡é…ç½®

**ä¼°è®¡å·¥ä½œé‡:** 1å¤©

---

## LLMé›†æˆ (æš‚ç¼“)

### 35. ğŸ”µ [Future] LLMæ¨ç†æ­¥éª¤

**çŠ¶æ€:** æš‚ç¼“ - å¾…LLMåŠŸèƒ½ç¨³å®šåå®æ–½

**åŠŸèƒ½æè¿°:**
åœ¨Pipelineä¸­é›†æˆLLMè¿›è¡Œå¤æ‚æ¡ˆä¾‹åˆ†æã€‚

**ç”¨ä¾‹:**
```yaml
pipeline:
  steps:
    - type: reason
      id: llm_fraud_analysis
      if: "context.total_score >= 40 && context.total_score <= 85"
      provider: openai
      model: gpt-4-turbo
      prompt:
        template: |
          åˆ†æä»¥ä¸‹äº¤æ˜“æ˜¯å¦å­˜åœ¨æ¬ºè¯ˆé£é™©...
      output_schema:
        risk_score: float
        reason: string
```

**TODO (æš‚ç¼“):**
- [ ] åœ¨Pipeline ASTä¸­æ·»åŠ ReasonStepèŠ‚ç‚¹
- [ ] å®ç°LLM providerè°ƒç”¨
- [ ] å®ç°promptæ¨¡æ¿å¼•æ“
- [ ] æ·»åŠ ç»“æ„åŒ–è¾“å‡ºè§£æ
- [ ] å®ç°å“åº”ç¼“å­˜
- [ ] æ·»åŠ æˆæœ¬è·Ÿè¸ª

---

### 36. ğŸ”µ [Future] inferåŠ¨ä½œ

**åŠŸèƒ½æè¿°:**
å¼‚æ­¥AIæ·±åº¦åˆ†æï¼ˆä¸é˜»å¡å†³ç­–æµç¨‹ï¼‰ã€‚

**ç”¨ä¾‹:**
```yaml
decision_logic:
  - condition: total_score >= 50 && total_score < 80
    action: infer
    infer:
      data_snapshot:
        - event.*
        - context.*
    reason: "éœ€è¦AIæ·±åº¦åˆ†æ"
```

**TODO (æš‚ç¼“):**
- [ ] åœ¨Decision ASTä¸­æ·»åŠ inferåŠ¨ä½œ
- [ ] å®ç°å¼‚æ­¥åˆ†æé˜Ÿåˆ—
- [ ] å®ç°æ•°æ®å¿«ç…§æœºåˆ¶
- [ ] æ·»åŠ åˆ†æç»“æœå­˜å‚¨å’Œæ£€ç´¢

---

## é™„å½•

### A. éœ€è¦ç«‹å³å…³æ³¨çš„æ–‡ä»¶åˆ—è¡¨

**é«˜ä¼˜å…ˆçº§:**
- `crates/corint-server/src/api/rest.rs` - 10å¤„panic!
- `crates/corint-runtime/src/feature/extractor.rs` - 350+ unwrap()
- `crates/corint-runtime/src/engine/pipeline_executor.rs` - ä¸å®Œæ•´çš„filterå¤„ç†
- `crates/corint-core/src/ast/expression.rs` - getterä¸­çš„panic!
- `crates/corint-runtime/src/context.rs` - å¤±è´¥çš„æµ‹è¯•

**ä¸­ä¼˜å…ˆçº§:**
- `crates/corint-repository/src/postgres.rs` - è¿‡åº¦å…‹éš†
- `crates/corint-repository/src/api.rs` - è¿‡åº¦å…‹éš†ï¼Œç¼ºå°‘æ–‡æ¡£
- `crates/corint-runtime/src/llm/provider.rs` - æ­»ä»£ç ï¼Œå ä½ç¬¦å®ç°
- `crates/corint-parser/src/*.rs` - ç¼ºå°‘é”™è¯¯å¤„ç†

---

### B. å‘½ä»¤å‚è€ƒ

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test --workspace

# æ£€æŸ¥ä»£ç è­¦å‘Š
cargo clippy --workspace -- -W clippy::all

# æ£€æŸ¥æ–‡æ¡£è¦†ç›–
cargo doc --workspace --no-deps --open

# è¿è¡ŒåŸºå‡†æµ‹è¯•
cargo bench --workspace

# æ£€æŸ¥æ­»ä»£ç 
cargo +nightly udeps --workspace

# å®‰å…¨å®¡è®¡
cargo audit
```

---

### C. æ›´æ–°æ—¥å¿—

| æ—¥æœŸ | ç‰ˆæœ¬ | å˜æ›´ |
|------|------|------|
| 2025-12-12 | 1.0 | åˆå§‹ç‰ˆæœ¬ |
| 2025-12-12 | 1.1 | **éåŠŸèƒ½æ€§é—®é¢˜ä¿®å¤å®Œæˆ(ç¬¬ä¸€è½®)**: å®ŒæˆP0å’ŒP1çº§åˆ«ä»£ç è´¨é‡æ”¹è¿› - âœ… å®¡æŸ¥å¹¶éªŒè¯æ‰€æœ‰panic!()è°ƒç”¨ï¼ˆä»…åœ¨æµ‹è¯•ä»£ç ä¸­ï¼‰- âœ… æ¸…ç†æ‰€æœ‰æ­»ä»£ç å’Œæœªä½¿ç”¨å±æ€§ï¼ˆ0ä¸ªè­¦å‘Šï¼‰- âœ… ä¿®å¤æ‰€æœ‰Clippyè­¦å‘Šï¼ˆ25+ â†’ 0ï¼‰- âœ… éªŒè¯æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ˆ694+ä¸ªæµ‹è¯•100%é€šè¿‡ï¼‰- è¯¦ç»†ä¿®å¤é¡¹ï¼šmetrics getteræ–¹æ³•ã€featureé…ç½®ã€æœªä½¿ç”¨å˜é‡ç­‰ |
| 2025-12-12 | 1.2 | **ä»£ç è´¨é‡å’Œæ€§èƒ½æ”¹è¿›(ç¬¬äºŒè½®)**: å®ŒæˆArc cloneä¼˜åŒ–å’ŒAPIä¸€è‡´æ€§éªŒè¯ - âœ… ä½¿ç”¨Arc::cloneæ˜¾å¼è¯­æ³•ï¼ˆpostgres.rs 2å¤„ï¼Œpipeline_executor.rs 1å¤„ï¼‰- âœ… éªŒè¯Builderæ¨¡å¼ä¸€è‡´æ€§ï¼ˆæ‰€æœ‰with_*å‘½åï¼‰- âœ… å®¡æŸ¥APIè®¾è®¡ï¼ˆsetterä¸builderæ­£ç¡®åˆ†ç¦»ï¼‰- âœ… æµ‹è¯•ä¿æŒ100%é€šè¿‡ï¼ŒClippyä¿æŒ0è­¦å‘Š |
| 2025-12-12 | 1.3 | **é”™è¯¯å¤„ç†ä¼˜åŒ–å®Œæˆ(ç¬¬ä¸‰è½®)**: å®Œæˆé”™è¯¯é“¾è¿½è¸ªæ”¹è¿› - âœ… æ·»åŠ #[source]å±æ€§åˆ°æ‰€æœ‰#[from]é”™è¯¯ï¼ˆ10+å¤„ï¼‰- âœ… RuntimeErroræ·»åŠ CoreErrorå˜ä½“ - âœ… ServerErroré‡æ„ä¸ºä½¿ç”¨thiserror - âœ… å®Œæ•´çš„é”™è¯¯é“¾æ”¯æŒ - âœ… æ‰€æœ‰æµ‹è¯•100%é€šè¿‡ |
| 2025-12-12 | 1.4 | **OpenTelemetryå¯è§‚æµ‹æ€§é›†æˆå®Œæˆ(ç¬¬å››è½®)**: å®ç°å®Œæ•´çš„OTelæ”¯æŒ - âœ… OpenTelemetryåˆå§‹åŒ–æ¨¡å—ï¼ˆotel.rsï¼‰- âœ… Prometheus metricså¯¼å‡º - âœ… åˆ†å¸ƒå¼è¿½è¸ªæ”¯æŒï¼ˆOTLPï¼‰- âœ… corint-serveré›†æˆï¼ˆ/metrics endpointï¼‰- âœ… ç¤ºä¾‹ä»£ç å’Œå®Œæ•´æ–‡æ¡£ï¼ˆruntime/README.mdï¼‰- âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ˆClippy 0è­¦å‘Šï¼‰|
| 2025-12-14 | 1.5 | **è§„åˆ™æ”¹è¿›å»ºè®®åˆå¹¶**: å°†RULE_IMPROVEMENT_RECOMMENDATIONS.mdä¸­çš„æœªå®ç°ä¼˜åŒ–é¡¹åˆå¹¶åˆ°optimize.md - âœ… æ–°å¢P0ä»»åŠ¡ï¼šany:é€»è¾‘ç»„Bugä¿®å¤ã€ç‰¹å¾å·¥ç¨‹æµ‹è¯•ã€è¡¨è¾¾å¼æµ‹è¯•ã€ä¸Šä¸‹æ–‡æµ‹è¯•ï¼ˆå…±4é¡¹ï¼‰- âœ… æ–°å¢P1ä»»åŠ¡ï¼šåŠ¨æ€é˜ˆå€¼ã€è§„åˆ™ä¾èµ–/ä¼˜å…ˆçº§ã€å¹¶è¡Œæ‰§è¡Œã€å¤–éƒ¨APIé›†æˆï¼ˆå…±17é¡¹ï¼‰- âœ… æ–°å¢P2ä»»åŠ¡ï¼šè§„åˆ™åœºæ™¯è¡¥å……ã€ç‰¹å¾å·¥ç¨‹å¢å¼ºã€æµ‹è¯•è¦†ç›–è¡¥å……ï¼ˆå…±18é¡¹ï¼‰- âœ… æ–°å¢P3ä»»åŠ¡ï¼šWeb3/åŠ å¯†è´§å¸è§„åˆ™ï¼ˆå…±3é¡¹ï¼‰- âœ… æ–°å¢Futureä»»åŠ¡ï¼šLLMé›†æˆ(æš‚ç¼“)ã€SDKå®¢æˆ·ç«¯ã€ç®¡ç†ç•Œé¢ç­‰ - âœ… æ ‡è®°å·²å®Œæˆé¡¹ï¼šimpossible_travelã€password_change_riskã€device_emulatorã€device_spoofingç­‰è§„åˆ™ - æ€»è®¡æ–°å¢42+ä¸ªå¾…åŠé¡¹ï¼Œè¦†ç›–DSLåŠŸèƒ½å¢å¼ºã€è§„åˆ™åœºæ™¯ã€ç‰¹å¾å·¥ç¨‹ã€æµ‹è¯•ç­‰é¢†åŸŸ |
| 2025-12-14 | 1.6 | **any:/all:é€»è¾‘ç»„ç¼–è¯‘å™¨Bugä¿®å¤å®Œæˆ(ç¬¬äº”è½®)**: ä¿®å¤å…³é”®çš„Stack underflowé”™è¯¯ - âœ… é‡å†™compile_any_conditions()å’Œcompile_all_conditions()ç§»é™¤é”™è¯¯çš„Dup+Jump+Popæ¨¡å¼ - âœ… æ–°å¢6ä¸ªå•å…ƒæµ‹è¯•ï¼ˆempty/single/multipleæ¡ä»¶åœºæ™¯ï¼‰- âœ… åˆ›å»ºé›†æˆæµ‹è¯•éªŒè¯æ— æ ˆæº¢å‡º - âœ… åˆå¹¶ä¸‰ä¸ªæ‹†åˆ†çš„account_takeoverè§„åˆ™ä¸ºå•ä¸ªç»Ÿä¸€è§„åˆ™ - âœ… 700+æµ‹è¯•å…¨éƒ¨é€šè¿‡ - è§£å†³äº†æ— æ³•åœ¨è§„åˆ™ä¸­ä½¿ç”¨OR/ANDé€»è¾‘ç»„åˆçš„å…³é”®é—®é¢˜ï¼Œç”Ÿäº§å°±ç»ª |

---

**æ–‡æ¡£ç»´æŠ¤è€…:** Claude Code
**æœ€åæ›´æ–°:** 2025-12-14 (v1.6 - any:/all:é€»è¾‘ç»„Bugä¿®å¤å®Œæˆ)
